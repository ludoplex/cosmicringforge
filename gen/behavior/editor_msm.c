/* AUTO-GENERATED by msmgen 1.0.0 â€” DO NOT EDIT
 * @generated Sun Mar  1 15:55:44 2026
 * Regenerate: make regen
 */

#include "editor_msm.h"

static const char *mode_names[] = {
    "Normal",
    "Insert",
    "Visual",
    "Command"
};

const char *editor_mode_name(editor_mode_t mode) {
    return mode_names[mode];
}

void editor_init(editor_ctx_t *ctx) {
    ctx->current = EDITOR_MODE_NORMAL;
    ctx->previous = ctx->current;
}

void editor_dispatch(editor_ctx_t *ctx, int event) {
    editor_mode_t next = ctx->current;
    switch (ctx->current) {
    case EDITOR_MODE_NORMAL:
        switch (event) {
        case 'i': next = EDITOR_MODE_INSERT; break;
        case 'v': next = EDITOR_MODE_VISUAL; break;
        case ':': next = EDITOR_MODE_COMMAND; break;
        default: break;
        }
        break;
    case EDITOR_MODE_INSERT:
        switch (event) {
        case 'ESC': next = EDITOR_MODE_NORMAL; break;
        default: break;
        }
        break;
    case EDITOR_MODE_VISUAL:
        switch (event) {
        case 'ESC': next = EDITOR_MODE_NORMAL; break;
        case 'y': next = EDITOR_MODE_NORMAL; break;
        case 'd': next = EDITOR_MODE_NORMAL; break;
        default: break;
        }
        break;
    case EDITOR_MODE_COMMAND:
        switch (event) {
        case 'ENTER': next = EDITOR_MODE_NORMAL; break;
        case 'ESC': next = EDITOR_MODE_NORMAL; break;
        default: break;
        }
        break;
    }
    if (next != ctx->current) {
        ctx->previous = ctx->current;
        ctx->current = next;
    }
}
