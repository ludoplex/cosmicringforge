/* AUTO-GENERATED by hsmgen 1.0.0 â€” DO NOT EDIT */
#ifndef TRAFFICLIGHT_HSM_H
#define TRAFFICLIGHT_HSM_H

#include <stdbool.h>

/* States (hierarchical, flattened to enum) */
typedef enum {
    TrafficLight_STATE_OPERATING = 0,
    TrafficLight_STATE_OPERATING_RED = 1,
    TrafficLight_STATE_OPERATING_GREEN = 2,
    TrafficLight_STATE_OPERATING_YELLOW = 3,
    TrafficLight_STATE_ERROR = 4,
    TrafficLight_STATE_COUNT
} TrafficLight_state_t;

/* Events */
typedef enum {
    TrafficLight_EVENT_FAULT = 0,
    TrafficLight_EVENT_TIMER = 1,
    TrafficLight_EVENT_RESET = 2,
    TrafficLight_EVENT_COUNT
} TrafficLight_event_t;

/* State hierarchy info */
typedef struct {
    const char *name;
    const char *full_path;
    int parent;       /* -1 if root */
    int depth;
    int initial_child; /* -1 if leaf */
    int has_history;
} TrafficLight_state_info_t;

/* HSM context (supports history) */
typedef struct {
    TrafficLight_state_t current_state;
    TrafficLight_state_t history[TrafficLight_STATE_COUNT]; /* History per composite state */
    void *user_data;
} TrafficLight_context_t;

/* HSM functions */
void TrafficLight_init(TrafficLight_context_t *ctx, void *user_data);
bool TrafficLight_dispatch(TrafficLight_context_t *ctx, TrafficLight_event_t event);
const char *TrafficLight_state_name(TrafficLight_state_t state);
const char *TrafficLight_state_path(TrafficLight_state_t state);
const char *TrafficLight_event_name(TrafficLight_event_t event);
int TrafficLight_get_parent(TrafficLight_state_t state);
bool TrafficLight_is_in(TrafficLight_context_t *ctx, TrafficLight_state_t state);

/* Action functions (implement these) */
extern void show_red(TrafficLight_context_t *ctx);
extern void show_green(TrafficLight_context_t *ctx);
extern void show_yellow(TrafficLight_context_t *ctx);
extern void blink_all(TrafficLight_context_t *ctx);

#endif /* TRAFFICLIGHT_HSM_H */
