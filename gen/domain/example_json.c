/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* JSON serialization (requires yyjson) */

#include "example_json.h"
#include <yyjson.h>
#include <string.h>

int Example_to_json(const Example *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_uint(doc, root, "id", obj->id);
    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "value", obj->value);
    yyjson_mut_obj_add_int(doc, root, "enabled", obj->enabled);

    size_t len = yyjson_mut_write(doc, 0, buf, size, NULL);
    yyjson_mut_doc_free(doc);
    return (int)len;
}

int Example_from_json(const char *json, Example *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_id = yyjson_obj_get(root, "id");
    if (v_id) obj->id = yyjson_get_uint(v_id);
    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_value = yyjson_obj_get(root, "value");
    if (v_value) obj->value = yyjson_get_int(v_value);
    yyjson_val *v_enabled = yyjson_obj_get(root, "enabled");
    if (v_enabled) obj->enabled = yyjson_get_int(v_enabled);

    yyjson_doc_free(doc);
    return 0;
}

