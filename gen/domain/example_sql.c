/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* SQLite bindings */

#include "example_sql.h"
#include <string.h>

int Example_create_table(sqlite3 *db) {
    const char *sql = "CREATE TABLE IF NOT EXISTS example (\n"
        "    id INTEGER,\n"
        "    name TEXT,\n"
        "    value INTEGER,\n"
        "    enabled INTEGER\n"
        ")";
    return sqlite3_exec(db, sql, NULL, NULL, NULL);
}

int Example_insert(sqlite3 *db, const Example *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "INSERT INTO example (id, name, value, enabled) VALUES (?, ?, ?, ?)";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_int64(stmt, 1, obj->id);
    sqlite3_bind_text(stmt, 2, obj->name, -1, SQLITE_STATIC);
    sqlite3_bind_int64(stmt, 3, obj->value);
    sqlite3_bind_int64(stmt, 4, obj->enabled);
    int rc = sqlite3_step(stmt);
    sqlite3_finalize(stmt);
    return rc == SQLITE_DONE ? 0 : -1;
}

int Example_select_by_id(sqlite3 *db, int64_t id, Example *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "SELECT * FROM example WHERE id = ?";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_int64(stmt, 1, id);
    if (sqlite3_step(stmt) != SQLITE_ROW) { sqlite3_finalize(stmt); return -1; }
    obj->id = sqlite3_column_int64(stmt, 0);
    strncpy(obj->name, (const char*)sqlite3_column_text(stmt, 1), sizeof(obj->name)-1);
    obj->value = sqlite3_column_int64(stmt, 2);
    obj->enabled = sqlite3_column_int64(stmt, 3);
    sqlite3_finalize(stmt);
    return 0;
}

