/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* JSON serialization (requires yyjson) */

#include "objdiff_json.h"
#include <yyjson.h>
#include <string.h>

int ObjSymbol_to_json(const ObjSymbol *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_uint(doc, root, "address", obj->address);
    yyjson_mut_obj_add_uint(doc, root, "size", obj->size);
    yyjson_mut_obj_add_int(doc, root, "type", obj->type);
    yyjson_mut_obj_add_int(doc, root, "bind", obj->bind);
    yyjson_mut_obj_add_str(doc, root, "section", obj->section);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int ObjSymbol_from_json(const char *json, ObjSymbol *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_address = yyjson_obj_get(root, "address");
    if (v_address) obj->address = yyjson_get_uint(v_address);
    yyjson_val *v_size = yyjson_obj_get(root, "size");
    if (v_size) obj->size = yyjson_get_uint(v_size);
    yyjson_val *v_type = yyjson_obj_get(root, "type");
    if (v_type) obj->type = yyjson_get_int(v_type);
    yyjson_val *v_bind = yyjson_obj_get(root, "bind");
    if (v_bind) obj->bind = yyjson_get_int(v_bind);
    yyjson_val *v_section = yyjson_obj_get(root, "section");
    if (v_section) strncpy(obj->section, yyjson_get_str(v_section), sizeof(obj->section)-1);

    yyjson_doc_free(doc);
    return 0;
}

int FuncDiff_to_json(const FuncDiff *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "status", obj->status);
    yyjson_mut_obj_add_uint(doc, root, "old_addr", obj->old_addr);
    yyjson_mut_obj_add_uint(doc, root, "new_addr", obj->new_addr);
    yyjson_mut_obj_add_uint(doc, root, "old_size", obj->old_size);
    yyjson_mut_obj_add_uint(doc, root, "new_size", obj->new_size);
    yyjson_mut_obj_add_uint(doc, root, "similarity", obj->similarity);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int FuncDiff_from_json(const char *json, FuncDiff *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_status = yyjson_obj_get(root, "status");
    if (v_status) obj->status = yyjson_get_int(v_status);
    yyjson_val *v_old_addr = yyjson_obj_get(root, "old_addr");
    if (v_old_addr) obj->old_addr = yyjson_get_uint(v_old_addr);
    yyjson_val *v_new_addr = yyjson_obj_get(root, "new_addr");
    if (v_new_addr) obj->new_addr = yyjson_get_uint(v_new_addr);
    yyjson_val *v_old_size = yyjson_obj_get(root, "old_size");
    if (v_old_size) obj->old_size = yyjson_get_uint(v_old_size);
    yyjson_val *v_new_size = yyjson_obj_get(root, "new_size");
    if (v_new_size) obj->new_size = yyjson_get_uint(v_new_size);
    yyjson_val *v_similarity = yyjson_obj_get(root, "similarity");
    if (v_similarity) obj->similarity = yyjson_get_uint(v_similarity);

    yyjson_doc_free(doc);
    return 0;
}

int DiffSession_to_json(const DiffSession *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "old_path", obj->old_path);
    yyjson_mut_obj_add_str(doc, root, "new_path", obj->new_path);
    yyjson_mut_obj_add_int(doc, root, "backend", obj->backend);
    yyjson_mut_obj_add_int(doc, root, "status", obj->status);
    yyjson_mut_obj_add_uint(doc, root, "total_funcs", obj->total_funcs);
    yyjson_mut_obj_add_uint(doc, root, "unchanged_funcs", obj->unchanged_funcs);
    yyjson_mut_obj_add_uint(doc, root, "modified_funcs", obj->modified_funcs);
    yyjson_mut_obj_add_uint(doc, root, "added_funcs", obj->added_funcs);
    yyjson_mut_obj_add_uint(doc, root, "removed_funcs", obj->removed_funcs);
    yyjson_mut_obj_add_str(doc, root, "error_msg", obj->error_msg);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int DiffSession_from_json(const char *json, DiffSession *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_old_path = yyjson_obj_get(root, "old_path");
    if (v_old_path) strncpy(obj->old_path, yyjson_get_str(v_old_path), sizeof(obj->old_path)-1);
    yyjson_val *v_new_path = yyjson_obj_get(root, "new_path");
    if (v_new_path) strncpy(obj->new_path, yyjson_get_str(v_new_path), sizeof(obj->new_path)-1);
    yyjson_val *v_backend = yyjson_obj_get(root, "backend");
    if (v_backend) obj->backend = yyjson_get_int(v_backend);
    yyjson_val *v_status = yyjson_obj_get(root, "status");
    if (v_status) obj->status = yyjson_get_int(v_status);
    yyjson_val *v_total_funcs = yyjson_obj_get(root, "total_funcs");
    if (v_total_funcs) obj->total_funcs = yyjson_get_uint(v_total_funcs);
    yyjson_val *v_unchanged_funcs = yyjson_obj_get(root, "unchanged_funcs");
    if (v_unchanged_funcs) obj->unchanged_funcs = yyjson_get_uint(v_unchanged_funcs);
    yyjson_val *v_modified_funcs = yyjson_obj_get(root, "modified_funcs");
    if (v_modified_funcs) obj->modified_funcs = yyjson_get_uint(v_modified_funcs);
    yyjson_val *v_added_funcs = yyjson_obj_get(root, "added_funcs");
    if (v_added_funcs) obj->added_funcs = yyjson_get_uint(v_added_funcs);
    yyjson_val *v_removed_funcs = yyjson_obj_get(root, "removed_funcs");
    if (v_removed_funcs) obj->removed_funcs = yyjson_get_uint(v_removed_funcs);
    yyjson_val *v_error_msg = yyjson_obj_get(root, "error_msg");
    if (v_error_msg) strncpy(obj->error_msg, yyjson_get_str(v_error_msg), sizeof(obj->error_msg)-1);

    yyjson_doc_free(doc);
    return 0;
}

int WamrState_to_json(const WamrState *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_int(doc, root, "initialized", obj->initialized);
    yyjson_mut_obj_add_str(doc, root, "module_path", obj->module_path);
    yyjson_mut_obj_add_uint(doc, root, "memory_size", obj->memory_size);
    yyjson_mut_obj_add_str(doc, root, "error_msg", obj->error_msg);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WamrState_from_json(const char *json, WamrState *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_initialized = yyjson_obj_get(root, "initialized");
    if (v_initialized) obj->initialized = yyjson_get_int(v_initialized);
    yyjson_val *v_module_path = yyjson_obj_get(root, "module_path");
    if (v_module_path) strncpy(obj->module_path, yyjson_get_str(v_module_path), sizeof(obj->module_path)-1);
    yyjson_val *v_memory_size = yyjson_obj_get(root, "memory_size");
    if (v_memory_size) obj->memory_size = yyjson_get_uint(v_memory_size);
    yyjson_val *v_error_msg = yyjson_obj_get(root, "error_msg");
    if (v_error_msg) strncpy(obj->error_msg, yyjson_get_str(v_error_msg), sizeof(obj->error_msg)-1);

    yyjson_doc_free(doc);
    return 0;
}

