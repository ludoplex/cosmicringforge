/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* SQLite bindings */

#include "objdiff_sql.h"
#include <string.h>

int ObjSymbol_create_table(sqlite3 *db) {
    const char *sql = "CREATE TABLE IF NOT EXISTS obj_symbol (\n"
        "    name TEXT,\n"
        "    address INTEGER,\n"
        "    size INTEGER,\n"
        "    type INTEGER,\n"
        "    bind INTEGER,\n"
        "    section TEXT\n"
        ")";
    return sqlite3_exec(db, sql, NULL, NULL, NULL);
}

int ObjSymbol_insert(sqlite3 *db, const ObjSymbol *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "INSERT INTO obj_symbol (name, address, size, type, bind, section) VALUES (?, ?, ?, ?, ?, ?)";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_text(stmt, 1, obj->name, -1, SQLITE_STATIC);
    sqlite3_bind_int64(stmt, 2, obj->address);
    sqlite3_bind_int64(stmt, 3, obj->size);
    sqlite3_bind_int64(stmt, 4, obj->type);
    sqlite3_bind_int64(stmt, 5, obj->bind);
    sqlite3_bind_text(stmt, 6, obj->section, -1, SQLITE_STATIC);
    int rc = sqlite3_step(stmt);
    sqlite3_finalize(stmt);
    return rc == SQLITE_DONE ? 0 : -1;
}

int ObjSymbol_select_by_id(sqlite3 *db, int64_t id, ObjSymbol *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "SELECT * FROM obj_symbol WHERE id = ?";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_int64(stmt, 1, id);
    if (sqlite3_step(stmt) != SQLITE_ROW) { sqlite3_finalize(stmt); return -1; }
    strncpy(obj->name, (const char*)sqlite3_column_text(stmt, 0), sizeof(obj->name)-1);
    obj->address = sqlite3_column_int64(stmt, 1);
    obj->size = sqlite3_column_int64(stmt, 2);
    obj->type = sqlite3_column_int64(stmt, 3);
    obj->bind = sqlite3_column_int64(stmt, 4);
    strncpy(obj->section, (const char*)sqlite3_column_text(stmt, 5), sizeof(obj->section)-1);
    sqlite3_finalize(stmt);
    return 0;
}

int FuncDiff_create_table(sqlite3 *db) {
    const char *sql = "CREATE TABLE IF NOT EXISTS func_diff (\n"
        "    name TEXT,\n"
        "    status INTEGER,\n"
        "    old_addr INTEGER,\n"
        "    new_addr INTEGER,\n"
        "    old_size INTEGER,\n"
        "    new_size INTEGER,\n"
        "    similarity INTEGER\n"
        ")";
    return sqlite3_exec(db, sql, NULL, NULL, NULL);
}

int FuncDiff_insert(sqlite3 *db, const FuncDiff *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "INSERT INTO func_diff (name, status, old_addr, new_addr, old_size, new_size, similarity) VALUES (?, ?, ?, ?, ?, ?, ?)";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_text(stmt, 1, obj->name, -1, SQLITE_STATIC);
    sqlite3_bind_int64(stmt, 2, obj->status);
    sqlite3_bind_int64(stmt, 3, obj->old_addr);
    sqlite3_bind_int64(stmt, 4, obj->new_addr);
    sqlite3_bind_int64(stmt, 5, obj->old_size);
    sqlite3_bind_int64(stmt, 6, obj->new_size);
    sqlite3_bind_int64(stmt, 7, obj->similarity);
    int rc = sqlite3_step(stmt);
    sqlite3_finalize(stmt);
    return rc == SQLITE_DONE ? 0 : -1;
}

int FuncDiff_select_by_id(sqlite3 *db, int64_t id, FuncDiff *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "SELECT * FROM func_diff WHERE id = ?";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_int64(stmt, 1, id);
    if (sqlite3_step(stmt) != SQLITE_ROW) { sqlite3_finalize(stmt); return -1; }
    strncpy(obj->name, (const char*)sqlite3_column_text(stmt, 0), sizeof(obj->name)-1);
    obj->status = sqlite3_column_int64(stmt, 1);
    obj->old_addr = sqlite3_column_int64(stmt, 2);
    obj->new_addr = sqlite3_column_int64(stmt, 3);
    obj->old_size = sqlite3_column_int64(stmt, 4);
    obj->new_size = sqlite3_column_int64(stmt, 5);
    obj->similarity = sqlite3_column_int64(stmt, 6);
    sqlite3_finalize(stmt);
    return 0;
}

int DiffSession_create_table(sqlite3 *db) {
    const char *sql = "CREATE TABLE IF NOT EXISTS diff_session (\n"
        "    old_path TEXT,\n"
        "    new_path TEXT,\n"
        "    backend INTEGER,\n"
        "    status INTEGER,\n"
        "    total_funcs INTEGER,\n"
        "    unchanged_funcs INTEGER,\n"
        "    modified_funcs INTEGER,\n"
        "    added_funcs INTEGER,\n"
        "    removed_funcs INTEGER,\n"
        "    error_msg TEXT\n"
        ")";
    return sqlite3_exec(db, sql, NULL, NULL, NULL);
}

int DiffSession_insert(sqlite3 *db, const DiffSession *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "INSERT INTO diff_session (old_path, new_path, backend, status, total_funcs, unchanged_funcs, modified_funcs, added_funcs, removed_funcs, error_msg) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_text(stmt, 1, obj->old_path, -1, SQLITE_STATIC);
    sqlite3_bind_text(stmt, 2, obj->new_path, -1, SQLITE_STATIC);
    sqlite3_bind_int64(stmt, 3, obj->backend);
    sqlite3_bind_int64(stmt, 4, obj->status);
    sqlite3_bind_int64(stmt, 5, obj->total_funcs);
    sqlite3_bind_int64(stmt, 6, obj->unchanged_funcs);
    sqlite3_bind_int64(stmt, 7, obj->modified_funcs);
    sqlite3_bind_int64(stmt, 8, obj->added_funcs);
    sqlite3_bind_int64(stmt, 9, obj->removed_funcs);
    sqlite3_bind_text(stmt, 10, obj->error_msg, -1, SQLITE_STATIC);
    int rc = sqlite3_step(stmt);
    sqlite3_finalize(stmt);
    return rc == SQLITE_DONE ? 0 : -1;
}

int DiffSession_select_by_id(sqlite3 *db, int64_t id, DiffSession *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "SELECT * FROM diff_session WHERE id = ?";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_int64(stmt, 1, id);
    if (sqlite3_step(stmt) != SQLITE_ROW) { sqlite3_finalize(stmt); return -1; }
    strncpy(obj->old_path, (const char*)sqlite3_column_text(stmt, 0), sizeof(obj->old_path)-1);
    strncpy(obj->new_path, (const char*)sqlite3_column_text(stmt, 1), sizeof(obj->new_path)-1);
    obj->backend = sqlite3_column_int64(stmt, 2);
    obj->status = sqlite3_column_int64(stmt, 3);
    obj->total_funcs = sqlite3_column_int64(stmt, 4);
    obj->unchanged_funcs = sqlite3_column_int64(stmt, 5);
    obj->modified_funcs = sqlite3_column_int64(stmt, 6);
    obj->added_funcs = sqlite3_column_int64(stmt, 7);
    obj->removed_funcs = sqlite3_column_int64(stmt, 8);
    strncpy(obj->error_msg, (const char*)sqlite3_column_text(stmt, 9), sizeof(obj->error_msg)-1);
    sqlite3_finalize(stmt);
    return 0;
}

int WamrState_create_table(sqlite3 *db) {
    const char *sql = "CREATE TABLE IF NOT EXISTS wamr_state (\n"
        "    initialized INTEGER,\n"
        "    module_path TEXT,\n"
        "    memory_size INTEGER,\n"
        "    error_msg TEXT\n"
        ")";
    return sqlite3_exec(db, sql, NULL, NULL, NULL);
}

int WamrState_insert(sqlite3 *db, const WamrState *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "INSERT INTO wamr_state (initialized, module_path, memory_size, error_msg) VALUES (?, ?, ?, ?)";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_int64(stmt, 1, obj->initialized);
    sqlite3_bind_text(stmt, 2, obj->module_path, -1, SQLITE_STATIC);
    sqlite3_bind_int64(stmt, 3, obj->memory_size);
    sqlite3_bind_text(stmt, 4, obj->error_msg, -1, SQLITE_STATIC);
    int rc = sqlite3_step(stmt);
    sqlite3_finalize(stmt);
    return rc == SQLITE_DONE ? 0 : -1;
}

int WamrState_select_by_id(sqlite3 *db, int64_t id, WamrState *obj) {
    sqlite3_stmt *stmt;
    const char *sql = "SELECT * FROM wamr_state WHERE id = ?";
    if (sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) != SQLITE_OK) return -1;
    sqlite3_bind_int64(stmt, 1, id);
    if (sqlite3_step(stmt) != SQLITE_ROW) { sqlite3_finalize(stmt); return -1; }
    obj->initialized = sqlite3_column_int64(stmt, 0);
    strncpy(obj->module_path, (const char*)sqlite3_column_text(stmt, 1), sizeof(obj->module_path)-1);
    obj->memory_size = sqlite3_column_int64(stmt, 2);
    strncpy(obj->error_msg, (const char*)sqlite3_column_text(stmt, 3), sizeof(obj->error_msg)-1);
    sqlite3_finalize(stmt);
    return 0;
}

