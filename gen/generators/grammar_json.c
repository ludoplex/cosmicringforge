/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* JSON serialization (requires yyjson) */

#include "grammar_json.h"
#include <yyjson.h>
#include <string.h>

int GrammarToken_to_json(const GrammarToken *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "value", obj->value);
    yyjson_mut_obj_add_int(doc, root, "auto_value", obj->auto_value);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarToken_from_json(const char *json, GrammarToken *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_value = yyjson_obj_get(root, "value");
    if (v_value) obj->value = yyjson_get_int(v_value);
    yyjson_val *v_auto_value = yyjson_obj_get(root, "auto_value");
    if (v_auto_value) obj->auto_value = yyjson_get_int(v_auto_value);

    yyjson_doc_free(doc);
    return 0;
}

int GrammarPrecedence_to_json(const GrammarPrecedence *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_int(doc, root, "level", obj->level);
    yyjson_mut_obj_add_uint(doc, root, "assoc", obj->assoc);
    yyjson_mut_obj_add_int(doc, root, "token_count", obj->token_count);
    yyjson_mut_obj_add_str(doc, root, "tokens", obj->tokens);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarPrecedence_from_json(const char *json, GrammarPrecedence *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_level = yyjson_obj_get(root, "level");
    if (v_level) obj->level = yyjson_get_int(v_level);
    yyjson_val *v_assoc = yyjson_obj_get(root, "assoc");
    if (v_assoc) obj->assoc = yyjson_get_uint(v_assoc);
    yyjson_val *v_token_count = yyjson_obj_get(root, "token_count");
    if (v_token_count) obj->token_count = yyjson_get_int(v_token_count);
    yyjson_val *v_tokens = yyjson_obj_get(root, "tokens");
    if (v_tokens) strncpy(obj->tokens, yyjson_get_str(v_tokens), sizeof(obj->tokens)-1);

    yyjson_doc_free(doc);
    return 0;
}

int GrammarSymbol_to_json(const GrammarSymbol *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "is_terminal", obj->is_terminal);
    yyjson_mut_obj_add_str(doc, root, "type_name", obj->type_name);
    yyjson_mut_obj_add_str(doc, root, "destructor", obj->destructor);
    yyjson_mut_obj_add_int(doc, root, "line_number", obj->line_number);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarSymbol_from_json(const char *json, GrammarSymbol *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_is_terminal = yyjson_obj_get(root, "is_terminal");
    if (v_is_terminal) obj->is_terminal = yyjson_get_int(v_is_terminal);
    yyjson_val *v_type_name = yyjson_obj_get(root, "type_name");
    if (v_type_name) strncpy(obj->type_name, yyjson_get_str(v_type_name), sizeof(obj->type_name)-1);
    yyjson_val *v_destructor = yyjson_obj_get(root, "destructor");
    if (v_destructor) strncpy(obj->destructor, yyjson_get_str(v_destructor), sizeof(obj->destructor)-1);
    yyjson_val *v_line_number = yyjson_obj_get(root, "line_number");
    if (v_line_number) obj->line_number = yyjson_get_int(v_line_number);

    yyjson_doc_free(doc);
    return 0;
}

int GrammarRule_to_json(const GrammarRule *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "lhs", obj->lhs);
    yyjson_mut_obj_add_int(doc, root, "rhs_count", obj->rhs_count);
    yyjson_mut_obj_add_str(doc, root, "rhs_symbols", obj->rhs_symbols);
    yyjson_mut_obj_add_str(doc, root, "rhs_aliases", obj->rhs_aliases);
    yyjson_mut_obj_add_str(doc, root, "action", obj->action);
    yyjson_mut_obj_add_str(doc, root, "precedence", obj->precedence);
    yyjson_mut_obj_add_int(doc, root, "line_number", obj->line_number);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarRule_from_json(const char *json, GrammarRule *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_lhs = yyjson_obj_get(root, "lhs");
    if (v_lhs) strncpy(obj->lhs, yyjson_get_str(v_lhs), sizeof(obj->lhs)-1);
    yyjson_val *v_rhs_count = yyjson_obj_get(root, "rhs_count");
    if (v_rhs_count) obj->rhs_count = yyjson_get_int(v_rhs_count);
    yyjson_val *v_rhs_symbols = yyjson_obj_get(root, "rhs_symbols");
    if (v_rhs_symbols) strncpy(obj->rhs_symbols, yyjson_get_str(v_rhs_symbols), sizeof(obj->rhs_symbols)-1);
    yyjson_val *v_rhs_aliases = yyjson_obj_get(root, "rhs_aliases");
    if (v_rhs_aliases) strncpy(obj->rhs_aliases, yyjson_get_str(v_rhs_aliases), sizeof(obj->rhs_aliases)-1);
    yyjson_val *v_action = yyjson_obj_get(root, "action");
    if (v_action) strncpy(obj->action, yyjson_get_str(v_action), sizeof(obj->action)-1);
    yyjson_val *v_precedence = yyjson_obj_get(root, "precedence");
    if (v_precedence) strncpy(obj->precedence, yyjson_get_str(v_precedence), sizeof(obj->precedence)-1);
    yyjson_val *v_line_number = yyjson_obj_get(root, "line_number");
    if (v_line_number) obj->line_number = yyjson_get_int(v_line_number);

    yyjson_doc_free(doc);
    return 0;
}

int GrammarDirective_to_json(const GrammarDirective *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "value", obj->value);
    yyjson_mut_obj_add_int(doc, root, "line_number", obj->line_number);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarDirective_from_json(const char *json, GrammarDirective *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_value = yyjson_obj_get(root, "value");
    if (v_value) strncpy(obj->value, yyjson_get_str(v_value), sizeof(obj->value)-1);
    yyjson_val *v_line_number = yyjson_obj_get(root, "line_number");
    if (v_line_number) obj->line_number = yyjson_get_int(v_line_number);

    yyjson_doc_free(doc);
    return 0;
}

int GrammarDef_to_json(const GrammarDef *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "start_symbol", obj->start_symbol);
    yyjson_mut_obj_add_str(doc, root, "token_type", obj->token_type);
    yyjson_mut_obj_add_int(doc, root, "token_count", obj->token_count);
    yyjson_mut_obj_add_int(doc, root, "rule_count", obj->rule_count);
    yyjson_mut_obj_add_int(doc, root, "precedence_levels", obj->precedence_levels);
    yyjson_mut_obj_add_int(doc, root, "has_error_symbol", obj->has_error_symbol);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarDef_from_json(const char *json, GrammarDef *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_start_symbol = yyjson_obj_get(root, "start_symbol");
    if (v_start_symbol) strncpy(obj->start_symbol, yyjson_get_str(v_start_symbol), sizeof(obj->start_symbol)-1);
    yyjson_val *v_token_type = yyjson_obj_get(root, "token_type");
    if (v_token_type) strncpy(obj->token_type, yyjson_get_str(v_token_type), sizeof(obj->token_type)-1);
    yyjson_val *v_token_count = yyjson_obj_get(root, "token_count");
    if (v_token_count) obj->token_count = yyjson_get_int(v_token_count);
    yyjson_val *v_rule_count = yyjson_obj_get(root, "rule_count");
    if (v_rule_count) obj->rule_count = yyjson_get_int(v_rule_count);
    yyjson_val *v_precedence_levels = yyjson_obj_get(root, "precedence_levels");
    if (v_precedence_levels) obj->precedence_levels = yyjson_get_int(v_precedence_levels);
    yyjson_val *v_has_error_symbol = yyjson_obj_get(root, "has_error_symbol");
    if (v_has_error_symbol) obj->has_error_symbol = yyjson_get_int(v_has_error_symbol);

    yyjson_doc_free(doc);
    return 0;
}

int GrammarInclude_to_json(const GrammarInclude *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_int(doc, root, "position", obj->position);
    yyjson_mut_obj_add_str(doc, root, "code", obj->code);
    yyjson_mut_obj_add_int(doc, root, "line_number", obj->line_number);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarInclude_from_json(const char *json, GrammarInclude *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_position = yyjson_obj_get(root, "position");
    if (v_position) obj->position = yyjson_get_int(v_position);
    yyjson_val *v_code = yyjson_obj_get(root, "code");
    if (v_code) strncpy(obj->code, yyjson_get_str(v_code), sizeof(obj->code)-1);
    yyjson_val *v_line_number = yyjson_obj_get(root, "line_number");
    if (v_line_number) obj->line_number = yyjson_get_int(v_line_number);

    yyjson_doc_free(doc);
    return 0;
}

int GrammarParseState_to_json(const GrammarParseState *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_int(doc, root, "rule_count", obj->rule_count);
    yyjson_mut_obj_add_int(doc, root, "symbol_count", obj->symbol_count);
    yyjson_mut_obj_add_int(doc, root, "conflict_count", obj->conflict_count);
    yyjson_mut_obj_add_int(doc, root, "current_line", obj->current_line);
    yyjson_mut_obj_add_int(doc, root, "error_code", obj->error_code);
    yyjson_mut_obj_add_str(doc, root, "error_msg", obj->error_msg);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int GrammarParseState_from_json(const char *json, GrammarParseState *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_rule_count = yyjson_obj_get(root, "rule_count");
    if (v_rule_count) obj->rule_count = yyjson_get_int(v_rule_count);
    yyjson_val *v_symbol_count = yyjson_obj_get(root, "symbol_count");
    if (v_symbol_count) obj->symbol_count = yyjson_get_int(v_symbol_count);
    yyjson_val *v_conflict_count = yyjson_obj_get(root, "conflict_count");
    if (v_conflict_count) obj->conflict_count = yyjson_get_int(v_conflict_count);
    yyjson_val *v_current_line = yyjson_obj_get(root, "current_line");
    if (v_current_line) obj->current_line = yyjson_get_int(v_current_line);
    yyjson_val *v_error_code = yyjson_obj_get(root, "error_code");
    if (v_error_code) obj->error_code = yyjson_get_int(v_error_code);
    yyjson_val *v_error_msg = yyjson_obj_get(root, "error_msg");
    if (v_error_msg) strncpy(obj->error_msg, yyjson_get_str(v_error_msg), sizeof(obj->error_msg)-1);

    yyjson_doc_free(doc);
    return 0;
}

int LemonConfig_to_json(const LemonConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "input_path", obj->input_path);
    yyjson_mut_obj_add_str(doc, root, "output_dir", obj->output_dir);
    yyjson_mut_obj_add_str(doc, root, "output_base", obj->output_base);
    yyjson_mut_obj_add_str(doc, root, "template_file", obj->template_file);
    yyjson_mut_obj_add_int(doc, root, "compress", obj->compress);
    yyjson_mut_obj_add_int(doc, root, "statistics", obj->statistics);
    yyjson_mut_obj_add_int(doc, root, "trace", obj->trace);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int LemonConfig_from_json(const char *json, LemonConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_input_path = yyjson_obj_get(root, "input_path");
    if (v_input_path) strncpy(obj->input_path, yyjson_get_str(v_input_path), sizeof(obj->input_path)-1);
    yyjson_val *v_output_dir = yyjson_obj_get(root, "output_dir");
    if (v_output_dir) strncpy(obj->output_dir, yyjson_get_str(v_output_dir), sizeof(obj->output_dir)-1);
    yyjson_val *v_output_base = yyjson_obj_get(root, "output_base");
    if (v_output_base) strncpy(obj->output_base, yyjson_get_str(v_output_base), sizeof(obj->output_base)-1);
    yyjson_val *v_template_file = yyjson_obj_get(root, "template_file");
    if (v_template_file) strncpy(obj->template_file, yyjson_get_str(v_template_file), sizeof(obj->template_file)-1);
    yyjson_val *v_compress = yyjson_obj_get(root, "compress");
    if (v_compress) obj->compress = yyjson_get_int(v_compress);
    yyjson_val *v_statistics = yyjson_obj_get(root, "statistics");
    if (v_statistics) obj->statistics = yyjson_get_int(v_statistics);
    yyjson_val *v_trace = yyjson_obj_get(root, "trace");
    if (v_trace) obj->trace = yyjson_get_int(v_trace);

    yyjson_doc_free(doc);
    return 0;
}

