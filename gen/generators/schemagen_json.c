/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* JSON serialization (requires yyjson) */

#include "schemagen_json.h"
#include <yyjson.h>
#include <string.h>

int SchemaField_to_json(const SchemaField *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_uint(doc, root, "base", obj->base);
    yyjson_mut_obj_add_str(doc, root, "struct_name", obj->struct_name);
    yyjson_mut_obj_add_int(doc, root, "array_size", obj->array_size);
    yyjson_mut_obj_add_int(doc, root, "is_pointer", obj->is_pointer);
    yyjson_mut_obj_add_int(doc, root, "has_range", obj->has_range);
    yyjson_mut_obj_add_int(doc, root, "range_min", obj->range_min);
    yyjson_mut_obj_add_int(doc, root, "range_max", obj->range_max);
    yyjson_mut_obj_add_int(doc, root, "has_default", obj->has_default);
    yyjson_mut_obj_add_int(doc, root, "default_val", obj->default_val);
    yyjson_mut_obj_add_int(doc, root, "not_empty", obj->not_empty);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int SchemaField_from_json(const char *json, SchemaField *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_base = yyjson_obj_get(root, "base");
    if (v_base) obj->base = yyjson_get_uint(v_base);
    yyjson_val *v_struct_name = yyjson_obj_get(root, "struct_name");
    if (v_struct_name) strncpy(obj->struct_name, yyjson_get_str(v_struct_name), sizeof(obj->struct_name)-1);
    yyjson_val *v_array_size = yyjson_obj_get(root, "array_size");
    if (v_array_size) obj->array_size = yyjson_get_int(v_array_size);
    yyjson_val *v_is_pointer = yyjson_obj_get(root, "is_pointer");
    if (v_is_pointer) obj->is_pointer = yyjson_get_int(v_is_pointer);
    yyjson_val *v_has_range = yyjson_obj_get(root, "has_range");
    if (v_has_range) obj->has_range = yyjson_get_int(v_has_range);
    yyjson_val *v_range_min = yyjson_obj_get(root, "range_min");
    if (v_range_min) obj->range_min = yyjson_get_int(v_range_min);
    yyjson_val *v_range_max = yyjson_obj_get(root, "range_max");
    if (v_range_max) obj->range_max = yyjson_get_int(v_range_max);
    yyjson_val *v_has_default = yyjson_obj_get(root, "has_default");
    if (v_has_default) obj->has_default = yyjson_get_int(v_has_default);
    yyjson_val *v_default_val = yyjson_obj_get(root, "default_val");
    if (v_default_val) obj->default_val = yyjson_get_int(v_default_val);
    yyjson_val *v_not_empty = yyjson_obj_get(root, "not_empty");
    if (v_not_empty) obj->not_empty = yyjson_get_int(v_not_empty);

    yyjson_doc_free(doc);
    return 0;
}

int SchemaTypeDef_to_json(const SchemaTypeDef *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "field_count", obj->field_count);
    yyjson_mut_obj_add_int(doc, root, "has_json", obj->has_json);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int SchemaTypeDef_from_json(const char *json, SchemaTypeDef *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_field_count = yyjson_obj_get(root, "field_count");
    if (v_field_count) obj->field_count = yyjson_get_int(v_field_count);
    yyjson_val *v_has_json = yyjson_obj_get(root, "has_json");
    if (v_has_json) obj->has_json = yyjson_get_int(v_has_json);
    yyjson_val *v_# Note = yyjson_obj_get(root, "# Note");

    yyjson_doc_free(doc);
    return 0;
}

int SchemaParseState_to_json(const SchemaParseState *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_int(doc, root, "type_count", obj->type_count);
    yyjson_mut_obj_add_int(doc, root, "current_line", obj->current_line);
    yyjson_mut_obj_add_int(doc, root, "error_code", obj->error_code);
    yyjson_mut_obj_add_str(doc, root, "error_msg", obj->error_msg);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int SchemaParseState_from_json(const char *json, SchemaParseState *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_type_count = yyjson_obj_get(root, "type_count");
    if (v_type_count) obj->type_count = yyjson_get_int(v_type_count);
    yyjson_val *v_current_line = yyjson_obj_get(root, "current_line");
    if (v_current_line) obj->current_line = yyjson_get_int(v_current_line);
    yyjson_val *v_error_code = yyjson_obj_get(root, "error_code");
    if (v_error_code) obj->error_code = yyjson_get_int(v_error_code);
    yyjson_val *v_error_msg = yyjson_obj_get(root, "error_msg");
    if (v_error_msg) strncpy(obj->error_msg, yyjson_get_str(v_error_msg), sizeof(obj->error_msg)-1);

    yyjson_doc_free(doc);
    return 0;
}

int SchemaGenConfig_to_json(const SchemaGenConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "input_path", obj->input_path);
    yyjson_mut_obj_add_str(doc, root, "output_dir", obj->output_dir);
    yyjson_mut_obj_add_str(doc, root, "profile", obj->profile);
    yyjson_mut_obj_add_int(doc, root, "generate_json", obj->generate_json);
    yyjson_mut_obj_add_int(doc, root, "generate_validators", obj->generate_validators);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int SchemaGenConfig_from_json(const char *json, SchemaGenConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_input_path = yyjson_obj_get(root, "input_path");
    if (v_input_path) strncpy(obj->input_path, yyjson_get_str(v_input_path), sizeof(obj->input_path)-1);
    yyjson_val *v_output_dir = yyjson_obj_get(root, "output_dir");
    if (v_output_dir) strncpy(obj->output_dir, yyjson_get_str(v_output_dir), sizeof(obj->output_dir)-1);
    yyjson_val *v_profile = yyjson_obj_get(root, "profile");
    if (v_profile) strncpy(obj->profile, yyjson_get_str(v_profile), sizeof(obj->profile)-1);
    yyjson_val *v_generate_json = yyjson_obj_get(root, "generate_json");
    if (v_generate_json) obj->generate_json = yyjson_get_int(v_generate_json);
    yyjson_val *v_generate_validators = yyjson_obj_get(root, "generate_validators");
    if (v_generate_validators) obj->generate_validators = yyjson_get_int(v_generate_validators);

    yyjson_doc_free(doc);
    return 0;
}

