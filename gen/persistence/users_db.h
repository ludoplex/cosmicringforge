/* AUTO-GENERATED by sqlgen 1.0.0 â€” DO NOT EDIT
 * @generated Sun Mar  1 15:38:20 2026
 * Regenerate: make regen
 */

#ifndef USERS_DB_H
#define USERS_DB_H

#include <sqlite3.h>
#include <stdint.h>

/* Row struct for users */
typedef struct {
    int64_t id;
    const char * name;
    const char * email;
    int64_t created_at;
} users_users_row_t;

/* Row struct for sessions */
typedef struct {
    int64_t id;
    int64_t user_id;
    const char * token;
    int64_t expires_at;
} users_sessions_row_t;

/* Database lifecycle */
int users_db_init(sqlite3 **db, const char *path);
void users_db_close(sqlite3 *db);

/* CRUD for users */
int users_users_insert(sqlite3 *db, const users_users_row_t *row);
int users_users_get_by_id(sqlite3 *db, int64_t id, users_users_row_t *out);
int users_users_delete(sqlite3 *db, int64_t id);

/* CRUD for sessions */
int users_sessions_insert(sqlite3 *db, const users_sessions_row_t *row);
int users_sessions_get_by_id(sqlite3 *db, int64_t id, users_sessions_row_t *out);
int users_sessions_delete(sqlite3 *db, int64_t id);

/* Custom queries */
int users_find_by_email(sqlite3 *db, const char * email, users_users_row_t *out);
int users_get_user_sessions(sqlite3 *db, int64_t user_id, users_sessions_row_t *out);

#endif /* USERS_DB_H */
