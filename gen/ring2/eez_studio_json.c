/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* JSON serialization (requires yyjson) */

#include "eez_studio_json.h"
#include <yyjson.h>
#include <string.h>

int EezWidget_to_json(const EezWidget *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "object_type", obj->object_type);
    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "x", obj->x);
    yyjson_mut_obj_add_int(doc, root, "y", obj->y);
    yyjson_mut_obj_add_int(doc, root, "width", obj->width);
    yyjson_mut_obj_add_int(doc, root, "height", obj->height);
    yyjson_mut_obj_add_str(doc, root, "style", obj->style);
    yyjson_mut_obj_add_int(doc, root, "visible", obj->visible);
    yyjson_mut_obj_add_int(doc, root, "enabled", obj->enabled);
    yyjson_mut_obj_add_str(doc, root, "data", obj->data);
    yyjson_mut_obj_add_str(doc, root, "action", obj->action);
    yyjson_mut_obj_add_int(doc, root, "children_count", obj->children_count);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezWidget_from_json(const char *json, EezWidget *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_object_type = yyjson_obj_get(root, "object_type");
    if (v_object_type) strncpy(obj->object_type, yyjson_get_str(v_object_type), sizeof(obj->object_type)-1);
    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_x = yyjson_obj_get(root, "x");
    if (v_x) obj->x = yyjson_get_int(v_x);
    yyjson_val *v_y = yyjson_obj_get(root, "y");
    if (v_y) obj->y = yyjson_get_int(v_y);
    yyjson_val *v_width = yyjson_obj_get(root, "width");
    if (v_width) obj->width = yyjson_get_int(v_width);
    yyjson_val *v_height = yyjson_obj_get(root, "height");
    if (v_height) obj->height = yyjson_get_int(v_height);
    yyjson_val *v_style = yyjson_obj_get(root, "style");
    if (v_style) strncpy(obj->style, yyjson_get_str(v_style), sizeof(obj->style)-1);
    yyjson_val *v_visible = yyjson_obj_get(root, "visible");
    if (v_visible) obj->visible = yyjson_get_int(v_visible);
    yyjson_val *v_enabled = yyjson_obj_get(root, "enabled");
    if (v_enabled) obj->enabled = yyjson_get_int(v_enabled);
    yyjson_val *v_data = yyjson_obj_get(root, "data");
    if (v_data) strncpy(obj->data, yyjson_get_str(v_data), sizeof(obj->data)-1);
    yyjson_val *v_action = yyjson_obj_get(root, "action");
    if (v_action) strncpy(obj->action, yyjson_get_str(v_action), sizeof(obj->action)-1);
    yyjson_val *v_children_count = yyjson_obj_get(root, "children_count");
    if (v_children_count) obj->children_count = yyjson_get_int(v_children_count);

    yyjson_doc_free(doc);
    return 0;
}

int EezLabel_to_json(const EezLabel *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "text", obj->text);
    yyjson_mut_obj_add_uint(doc, root, "text_type", obj->text_type);
    yyjson_mut_obj_add_str(doc, root, "font", obj->font);
    yyjson_mut_obj_add_uint(doc, root, "text_align", obj->text_align);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezLabel_from_json(const char *json, EezLabel *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_text = yyjson_obj_get(root, "text");
    if (v_text) strncpy(obj->text, yyjson_get_str(v_text), sizeof(obj->text)-1);
    yyjson_val *v_text_type = yyjson_obj_get(root, "text_type");
    if (v_text_type) obj->text_type = yyjson_get_uint(v_text_type);
    yyjson_val *v_font = yyjson_obj_get(root, "font");
    if (v_font) strncpy(obj->font, yyjson_get_str(v_font), sizeof(obj->font)-1);
    yyjson_val *v_text_align = yyjson_obj_get(root, "text_align");
    if (v_text_align) obj->text_align = yyjson_get_uint(v_text_align);

    yyjson_doc_free(doc);
    return 0;
}

int EezButton_to_json(const EezButton *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "text", obj->text);
    yyjson_mut_obj_add_str(doc, root, "icon", obj->icon);
    yyjson_mut_obj_add_int(doc, root, "checkable", obj->checkable);
    yyjson_mut_obj_add_int(doc, root, "checked", obj->checked);
    yyjson_mut_obj_add_str(doc, root, "disabled_style", obj->disabled_style);
    yyjson_mut_obj_add_str(doc, root, "pressed_style", obj->pressed_style);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezButton_from_json(const char *json, EezButton *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_text = yyjson_obj_get(root, "text");
    if (v_text) strncpy(obj->text, yyjson_get_str(v_text), sizeof(obj->text)-1);
    yyjson_val *v_icon = yyjson_obj_get(root, "icon");
    if (v_icon) strncpy(obj->icon, yyjson_get_str(v_icon), sizeof(obj->icon)-1);
    yyjson_val *v_checkable = yyjson_obj_get(root, "checkable");
    if (v_checkable) obj->checkable = yyjson_get_int(v_checkable);
    yyjson_val *v_checked = yyjson_obj_get(root, "checked");
    if (v_checked) obj->checked = yyjson_get_int(v_checked);
    yyjson_val *v_disabled_style = yyjson_obj_get(root, "disabled_style");
    if (v_disabled_style) strncpy(obj->disabled_style, yyjson_get_str(v_disabled_style), sizeof(obj->disabled_style)-1);
    yyjson_val *v_pressed_style = yyjson_obj_get(root, "pressed_style");
    if (v_pressed_style) strncpy(obj->pressed_style, yyjson_get_str(v_pressed_style), sizeof(obj->pressed_style)-1);

    yyjson_doc_free(doc);
    return 0;
}

int EezInput_to_json(const EezInput *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_uint(doc, root, "input_type", obj->input_type);
    yyjson_mut_obj_add_real(doc, root, "min_value", obj->min_value);
    yyjson_mut_obj_add_real(doc, root, "max_value", obj->max_value);
    yyjson_mut_obj_add_real(doc, root, "step", obj->step);
    yyjson_mut_obj_add_str(doc, root, "placeholder", obj->placeholder);
    yyjson_mut_obj_add_str(doc, root, "unit", obj->unit);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezInput_from_json(const char *json, EezInput *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_input_type = yyjson_obj_get(root, "input_type");
    if (v_input_type) obj->input_type = yyjson_get_uint(v_input_type);
    yyjson_val *v_min_value = yyjson_obj_get(root, "min_value");
    if (v_min_value) obj->min_value = yyjson_get_real(v_min_value);
    yyjson_val *v_max_value = yyjson_obj_get(root, "max_value");
    if (v_max_value) obj->max_value = yyjson_get_real(v_max_value);
    yyjson_val *v_step = yyjson_obj_get(root, "step");
    if (v_step) obj->step = yyjson_get_real(v_step);
    yyjson_val *v_placeholder = yyjson_obj_get(root, "placeholder");
    if (v_placeholder) strncpy(obj->placeholder, yyjson_get_str(v_placeholder), sizeof(obj->placeholder)-1);
    yyjson_val *v_unit = yyjson_obj_get(root, "unit");
    if (v_unit) strncpy(obj->unit, yyjson_get_str(v_unit), sizeof(obj->unit)-1);

    yyjson_doc_free(doc);
    return 0;
}

int EezStyle_to_json(const EezStyle *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_uint(doc, root, "bg_color", obj->bg_color);
    yyjson_mut_obj_add_uint(doc, root, "text_color", obj->text_color);
    yyjson_mut_obj_add_uint(doc, root, "border_color", obj->border_color);
    yyjson_mut_obj_add_int(doc, root, "border_width", obj->border_width);
    yyjson_mut_obj_add_int(doc, root, "border_radius", obj->border_radius);
    yyjson_mut_obj_add_int(doc, root, "padding_top", obj->padding_top);
    yyjson_mut_obj_add_int(doc, root, "padding_bottom", obj->padding_bottom);
    yyjson_mut_obj_add_int(doc, root, "padding_left", obj->padding_left);
    yyjson_mut_obj_add_int(doc, root, "padding_right", obj->padding_right);
    yyjson_mut_obj_add_str(doc, root, "font", obj->font);
    yyjson_mut_obj_add_uint(doc, root, "opacity", obj->opacity);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezStyle_from_json(const char *json, EezStyle *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_bg_color = yyjson_obj_get(root, "bg_color");
    if (v_bg_color) obj->bg_color = yyjson_get_uint(v_bg_color);
    yyjson_val *v_text_color = yyjson_obj_get(root, "text_color");
    if (v_text_color) obj->text_color = yyjson_get_uint(v_text_color);
    yyjson_val *v_border_color = yyjson_obj_get(root, "border_color");
    if (v_border_color) obj->border_color = yyjson_get_uint(v_border_color);
    yyjson_val *v_border_width = yyjson_obj_get(root, "border_width");
    if (v_border_width) obj->border_width = yyjson_get_int(v_border_width);
    yyjson_val *v_border_radius = yyjson_obj_get(root, "border_radius");
    if (v_border_radius) obj->border_radius = yyjson_get_int(v_border_radius);
    yyjson_val *v_padding_top = yyjson_obj_get(root, "padding_top");
    if (v_padding_top) obj->padding_top = yyjson_get_int(v_padding_top);
    yyjson_val *v_padding_bottom = yyjson_obj_get(root, "padding_bottom");
    if (v_padding_bottom) obj->padding_bottom = yyjson_get_int(v_padding_bottom);
    yyjson_val *v_padding_left = yyjson_obj_get(root, "padding_left");
    if (v_padding_left) obj->padding_left = yyjson_get_int(v_padding_left);
    yyjson_val *v_padding_right = yyjson_obj_get(root, "padding_right");
    if (v_padding_right) obj->padding_right = yyjson_get_int(v_padding_right);
    yyjson_val *v_font = yyjson_obj_get(root, "font");
    if (v_font) strncpy(obj->font, yyjson_get_str(v_font), sizeof(obj->font)-1);
    yyjson_val *v_opacity = yyjson_obj_get(root, "opacity");
    if (v_opacity) obj->opacity = yyjson_get_uint(v_opacity);

    yyjson_doc_free(doc);
    return 0;
}

int EezPage_to_json(const EezPage *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "width", obj->width);
    yyjson_mut_obj_add_int(doc, root, "height", obj->height);
    yyjson_mut_obj_add_int(doc, root, "widget_count", obj->widget_count);
    yyjson_mut_obj_add_str(doc, root, "style", obj->style);
    yyjson_mut_obj_add_int(doc, root, "close_page_if_touched_outside", obj->close_page_if_touched_outside);
    yyjson_mut_obj_add_int(doc, root, "use_style", obj->use_style);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezPage_from_json(const char *json, EezPage *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_width = yyjson_obj_get(root, "width");
    if (v_width) obj->width = yyjson_get_int(v_width);
    yyjson_val *v_height = yyjson_obj_get(root, "height");
    if (v_height) obj->height = yyjson_get_int(v_height);
    yyjson_val *v_widget_count = yyjson_obj_get(root, "widget_count");
    if (v_widget_count) obj->widget_count = yyjson_get_int(v_widget_count);
    yyjson_val *v_style = yyjson_obj_get(root, "style");
    if (v_style) strncpy(obj->style, yyjson_get_str(v_style), sizeof(obj->style)-1);
    yyjson_val *v_close_page_if_touched_outside = yyjson_obj_get(root, "close_page_if_touched_outside");
    if (v_close_page_if_touched_outside) obj->close_page_if_touched_outside = yyjson_get_int(v_close_page_if_touched_outside);
    yyjson_val *v_use_style = yyjson_obj_get(root, "use_style");
    if (v_use_style) obj->use_style = yyjson_get_int(v_use_style);

    yyjson_doc_free(doc);
    return 0;
}

int EezAction_to_json(const EezAction *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_uint(doc, root, "action_type", obj->action_type);
    yyjson_mut_obj_add_str(doc, root, "implementation", obj->implementation);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezAction_from_json(const char *json, EezAction *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_action_type = yyjson_obj_get(root, "action_type");
    if (v_action_type) obj->action_type = yyjson_get_uint(v_action_type);
    yyjson_val *v_implementation = yyjson_obj_get(root, "implementation");
    if (v_implementation) strncpy(obj->implementation, yyjson_get_str(v_implementation), sizeof(obj->implementation)-1);

    yyjson_doc_free(doc);
    return 0;
}

int EezDataItem_to_json(const EezDataItem *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "data_type", obj->data_type);
    yyjson_mut_obj_add_str(doc, root, "default_value", obj->default_value);
    yyjson_mut_obj_add_str(doc, root, "enum_values", obj->enum_values);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezDataItem_from_json(const char *json, EezDataItem *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_data_type = yyjson_obj_get(root, "data_type");
    if (v_data_type) strncpy(obj->data_type, yyjson_get_str(v_data_type), sizeof(obj->data_type)-1);
    yyjson_val *v_default_value = yyjson_obj_get(root, "default_value");
    if (v_default_value) strncpy(obj->default_value, yyjson_get_str(v_default_value), sizeof(obj->default_value)-1);
    yyjson_val *v_enum_values = yyjson_obj_get(root, "enum_values");
    if (v_enum_values) strncpy(obj->enum_values, yyjson_get_str(v_enum_values), sizeof(obj->enum_values)-1);

    yyjson_doc_free(doc);
    return 0;
}

int EezFont_to_json(const EezFont *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "source", obj->source);
    yyjson_mut_obj_add_int(doc, root, "size", obj->size);
    yyjson_mut_obj_add_uint(doc, root, "bpp", obj->bpp);
    yyjson_mut_obj_add_str(doc, root, "include_glyphs", obj->include_glyphs);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezFont_from_json(const char *json, EezFont *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_source = yyjson_obj_get(root, "source");
    if (v_source) strncpy(obj->source, yyjson_get_str(v_source), sizeof(obj->source)-1);
    yyjson_val *v_size = yyjson_obj_get(root, "size");
    if (v_size) obj->size = yyjson_get_int(v_size);
    yyjson_val *v_bpp = yyjson_obj_get(root, "bpp");
    if (v_bpp) obj->bpp = yyjson_get_uint(v_bpp);
    yyjson_val *v_include_glyphs = yyjson_obj_get(root, "include_glyphs");
    if (v_include_glyphs) strncpy(obj->include_glyphs, yyjson_get_str(v_include_glyphs), sizeof(obj->include_glyphs)-1);

    yyjson_doc_free(doc);
    return 0;
}

int EezBitmap_to_json(const EezBitmap *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "source", obj->source);
    yyjson_mut_obj_add_uint(doc, root, "bpp", obj->bpp);
    yyjson_mut_obj_add_int(doc, root, "compressed", obj->compressed);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezBitmap_from_json(const char *json, EezBitmap *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_source = yyjson_obj_get(root, "source");
    if (v_source) strncpy(obj->source, yyjson_get_str(v_source), sizeof(obj->source)-1);
    yyjson_val *v_bpp = yyjson_obj_get(root, "bpp");
    if (v_bpp) obj->bpp = yyjson_get_uint(v_bpp);
    yyjson_val *v_compressed = yyjson_obj_get(root, "compressed");
    if (v_compressed) obj->compressed = yyjson_get_int(v_compressed);

    yyjson_doc_free(doc);
    return 0;
}

int EezTheme_to_json(const EezTheme *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "colors", obj->colors);
    yyjson_mut_obj_add_int(doc, root, "style_count", obj->style_count);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezTheme_from_json(const char *json, EezTheme *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_colors = yyjson_obj_get(root, "colors");
    if (v_colors) strncpy(obj->colors, yyjson_get_str(v_colors), sizeof(obj->colors)-1);
    yyjson_val *v_style_count = yyjson_obj_get(root, "style_count");
    if (v_style_count) obj->style_count = yyjson_get_int(v_style_count);

    yyjson_doc_free(doc);
    return 0;
}

int EezProjectConfig_to_json(const EezProjectConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "project_name", obj->project_name);
    yyjson_mut_obj_add_str(doc, root, "project_version", obj->project_version);
    yyjson_mut_obj_add_int(doc, root, "display_width", obj->display_width);
    yyjson_mut_obj_add_int(doc, root, "display_height", obj->display_height);
    yyjson_mut_obj_add_str(doc, root, "color_format", obj->color_format);
    yyjson_mut_obj_add_str(doc, root, "target", obj->target);
    yyjson_mut_obj_add_str(doc, root, "lvgl_version", obj->lvgl_version);
    yyjson_mut_obj_add_int(doc, root, "page_count", obj->page_count);
    yyjson_mut_obj_add_int(doc, root, "font_count", obj->font_count);
    yyjson_mut_obj_add_int(doc, root, "bitmap_count", obj->bitmap_count);
    yyjson_mut_obj_add_int(doc, root, "style_count", obj->style_count);
    yyjson_mut_obj_add_int(doc, root, "action_count", obj->action_count);
    yyjson_mut_obj_add_int(doc, root, "data_item_count", obj->data_item_count);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezProjectConfig_from_json(const char *json, EezProjectConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_project_name = yyjson_obj_get(root, "project_name");
    if (v_project_name) strncpy(obj->project_name, yyjson_get_str(v_project_name), sizeof(obj->project_name)-1);
    yyjson_val *v_project_version = yyjson_obj_get(root, "project_version");
    if (v_project_version) strncpy(obj->project_version, yyjson_get_str(v_project_version), sizeof(obj->project_version)-1);
    yyjson_val *v_display_width = yyjson_obj_get(root, "display_width");
    if (v_display_width) obj->display_width = yyjson_get_int(v_display_width);
    yyjson_val *v_display_height = yyjson_obj_get(root, "display_height");
    if (v_display_height) obj->display_height = yyjson_get_int(v_display_height);
    yyjson_val *v_color_format = yyjson_obj_get(root, "color_format");
    if (v_color_format) strncpy(obj->color_format, yyjson_get_str(v_color_format), sizeof(obj->color_format)-1);
    yyjson_val *v_target = yyjson_obj_get(root, "target");
    if (v_target) strncpy(obj->target, yyjson_get_str(v_target), sizeof(obj->target)-1);
    yyjson_val *v_lvgl_version = yyjson_obj_get(root, "lvgl_version");
    if (v_lvgl_version) strncpy(obj->lvgl_version, yyjson_get_str(v_lvgl_version), sizeof(obj->lvgl_version)-1);
    yyjson_val *v_page_count = yyjson_obj_get(root, "page_count");
    if (v_page_count) obj->page_count = yyjson_get_int(v_page_count);
    yyjson_val *v_font_count = yyjson_obj_get(root, "font_count");
    if (v_font_count) obj->font_count = yyjson_get_int(v_font_count);
    yyjson_val *v_bitmap_count = yyjson_obj_get(root, "bitmap_count");
    if (v_bitmap_count) obj->bitmap_count = yyjson_get_int(v_bitmap_count);
    yyjson_val *v_style_count = yyjson_obj_get(root, "style_count");
    if (v_style_count) obj->style_count = yyjson_get_int(v_style_count);
    yyjson_val *v_action_count = yyjson_obj_get(root, "action_count");
    if (v_action_count) obj->action_count = yyjson_get_int(v_action_count);
    yyjson_val *v_data_item_count = yyjson_obj_get(root, "data_item_count");
    if (v_data_item_count) obj->data_item_count = yyjson_get_int(v_data_item_count);

    yyjson_doc_free(doc);
    return 0;
}

int EezBuildConfig_to_json(const EezBuildConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "output_dir", obj->output_dir);
    yyjson_mut_obj_add_int(doc, root, "generate_images", obj->generate_images);
    yyjson_mut_obj_add_int(doc, root, "generate_fonts", obj->generate_fonts);
    yyjson_mut_obj_add_int(doc, root, "generate_styles", obj->generate_styles);
    yyjson_mut_obj_add_int(doc, root, "generate_screens", obj->generate_screens);
    yyjson_mut_obj_add_int(doc, root, "generate_actions", obj->generate_actions);
    yyjson_mut_obj_add_int(doc, root, "compress_images", obj->compress_images);
    yyjson_mut_obj_add_str(doc, root, "lvgl_include_path", obj->lvgl_include_path);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int EezBuildConfig_from_json(const char *json, EezBuildConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_output_dir = yyjson_obj_get(root, "output_dir");
    if (v_output_dir) strncpy(obj->output_dir, yyjson_get_str(v_output_dir), sizeof(obj->output_dir)-1);
    yyjson_val *v_generate_images = yyjson_obj_get(root, "generate_images");
    if (v_generate_images) obj->generate_images = yyjson_get_int(v_generate_images);
    yyjson_val *v_generate_fonts = yyjson_obj_get(root, "generate_fonts");
    if (v_generate_fonts) obj->generate_fonts = yyjson_get_int(v_generate_fonts);
    yyjson_val *v_generate_styles = yyjson_obj_get(root, "generate_styles");
    if (v_generate_styles) obj->generate_styles = yyjson_get_int(v_generate_styles);
    yyjson_val *v_generate_screens = yyjson_obj_get(root, "generate_screens");
    if (v_generate_screens) obj->generate_screens = yyjson_get_int(v_generate_screens);
    yyjson_val *v_generate_actions = yyjson_obj_get(root, "generate_actions");
    if (v_generate_actions) obj->generate_actions = yyjson_get_int(v_generate_actions);
    yyjson_val *v_compress_images = yyjson_obj_get(root, "compress_images");
    if (v_compress_images) obj->compress_images = yyjson_get_int(v_compress_images);
    yyjson_val *v_lvgl_include_path = yyjson_obj_get(root, "lvgl_include_path");
    if (v_lvgl_include_path) strncpy(obj->lvgl_include_path, yyjson_get_str(v_lvgl_include_path), sizeof(obj->lvgl_include_path)-1);

    yyjson_doc_free(doc);
    return 0;
}

