/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* JSON serialization (requires yyjson) */

#include "openmodelica_json.h"
#include <yyjson.h>
#include <string.h>

int MoVariable_to_json(const MoVariable *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_uint(doc, root, "var_type", obj->var_type);
    yyjson_mut_obj_add_uint(doc, root, "variability", obj->variability);
    yyjson_mut_obj_add_uint(doc, root, "causality", obj->causality);
    yyjson_mut_obj_add_str(doc, root, "start_value", obj->start_value);
    yyjson_mut_obj_add_str(doc, root, "unit", obj->unit);
    yyjson_mut_obj_add_str(doc, root, "display_unit", obj->display_unit);
    yyjson_mut_obj_add_real(doc, root, "min_value", obj->min_value);
    yyjson_mut_obj_add_real(doc, root, "max_value", obj->max_value);
    yyjson_mut_obj_add_real(doc, root, "nominal", obj->nominal);
    yyjson_mut_obj_add_int(doc, root, "fixed", obj->fixed);
    yyjson_mut_obj_add_str(doc, root, "description", obj->description);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoVariable_from_json(const char *json, MoVariable *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_var_type = yyjson_obj_get(root, "var_type");
    if (v_var_type) obj->var_type = yyjson_get_uint(v_var_type);
    yyjson_val *v_variability = yyjson_obj_get(root, "variability");
    if (v_variability) obj->variability = yyjson_get_uint(v_variability);
    yyjson_val *v_causality = yyjson_obj_get(root, "causality");
    if (v_causality) obj->causality = yyjson_get_uint(v_causality);
    yyjson_val *v_start_value = yyjson_obj_get(root, "start_value");
    if (v_start_value) strncpy(obj->start_value, yyjson_get_str(v_start_value), sizeof(obj->start_value)-1);
    yyjson_val *v_unit = yyjson_obj_get(root, "unit");
    if (v_unit) strncpy(obj->unit, yyjson_get_str(v_unit), sizeof(obj->unit)-1);
    yyjson_val *v_display_unit = yyjson_obj_get(root, "display_unit");
    if (v_display_unit) strncpy(obj->display_unit, yyjson_get_str(v_display_unit), sizeof(obj->display_unit)-1);
    yyjson_val *v_min_value = yyjson_obj_get(root, "min_value");
    if (v_min_value) obj->min_value = yyjson_get_real(v_min_value);
    yyjson_val *v_max_value = yyjson_obj_get(root, "max_value");
    if (v_max_value) obj->max_value = yyjson_get_real(v_max_value);
    yyjson_val *v_nominal = yyjson_obj_get(root, "nominal");
    if (v_nominal) obj->nominal = yyjson_get_real(v_nominal);
    yyjson_val *v_fixed = yyjson_obj_get(root, "fixed");
    if (v_fixed) obj->fixed = yyjson_get_int(v_fixed);
    yyjson_val *v_description = yyjson_obj_get(root, "description");
    if (v_description) strncpy(obj->description, yyjson_get_str(v_description), sizeof(obj->description)-1);

    yyjson_doc_free(doc);
    return 0;
}

int MoEquation_to_json(const MoEquation *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_uint(doc, root, "equation_type", obj->equation_type);
    yyjson_mut_obj_add_str(doc, root, "lhs", obj->lhs);
    yyjson_mut_obj_add_str(doc, root, "rhs", obj->rhs);
    yyjson_mut_obj_add_str(doc, root, "condition", obj->condition);
    yyjson_mut_obj_add_int(doc, root, "is_initial", obj->is_initial);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoEquation_from_json(const char *json, MoEquation *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_equation_type = yyjson_obj_get(root, "equation_type");
    if (v_equation_type) obj->equation_type = yyjson_get_uint(v_equation_type);
    yyjson_val *v_lhs = yyjson_obj_get(root, "lhs");
    if (v_lhs) strncpy(obj->lhs, yyjson_get_str(v_lhs), sizeof(obj->lhs)-1);
    yyjson_val *v_rhs = yyjson_obj_get(root, "rhs");
    if (v_rhs) strncpy(obj->rhs, yyjson_get_str(v_rhs), sizeof(obj->rhs)-1);
    yyjson_val *v_condition = yyjson_obj_get(root, "condition");
    if (v_condition) strncpy(obj->condition, yyjson_get_str(v_condition), sizeof(obj->condition)-1);
    yyjson_val *v_is_initial = yyjson_obj_get(root, "is_initial");
    if (v_is_initial) obj->is_initial = yyjson_get_int(v_is_initial);

    yyjson_doc_free(doc);
    return 0;
}

int MoConnector_to_json(const MoConnector *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "connector_type", obj->connector_type);
    yyjson_mut_obj_add_int(doc, root, "is_flow", obj->is_flow);
    yyjson_mut_obj_add_int(doc, root, "is_stream", obj->is_stream);
    yyjson_mut_obj_add_int(doc, root, "variable_count", obj->variable_count);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoConnector_from_json(const char *json, MoConnector *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_connector_type = yyjson_obj_get(root, "connector_type");
    if (v_connector_type) strncpy(obj->connector_type, yyjson_get_str(v_connector_type), sizeof(obj->connector_type)-1);
    yyjson_val *v_is_flow = yyjson_obj_get(root, "is_flow");
    if (v_is_flow) obj->is_flow = yyjson_get_int(v_is_flow);
    yyjson_val *v_is_stream = yyjson_obj_get(root, "is_stream");
    if (v_is_stream) obj->is_stream = yyjson_get_int(v_is_stream);
    yyjson_val *v_variable_count = yyjson_obj_get(root, "variable_count");
    if (v_variable_count) obj->variable_count = yyjson_get_int(v_variable_count);

    yyjson_doc_free(doc);
    return 0;
}

int MoComponent_to_json(const MoComponent *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "type_name", obj->type_name);
    yyjson_mut_obj_add_int(doc, root, "is_replaceable", obj->is_replaceable);
    yyjson_mut_obj_add_int(doc, root, "is_final", obj->is_final);
    yyjson_mut_obj_add_int(doc, root, "is_inner", obj->is_inner);
    yyjson_mut_obj_add_int(doc, root, "is_outer", obj->is_outer);
    yyjson_mut_obj_add_int(doc, root, "modifier_count", obj->modifier_count);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoComponent_from_json(const char *json, MoComponent *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_type_name = yyjson_obj_get(root, "type_name");
    if (v_type_name) strncpy(obj->type_name, yyjson_get_str(v_type_name), sizeof(obj->type_name)-1);
    yyjson_val *v_is_replaceable = yyjson_obj_get(root, "is_replaceable");
    if (v_is_replaceable) obj->is_replaceable = yyjson_get_int(v_is_replaceable);
    yyjson_val *v_is_final = yyjson_obj_get(root, "is_final");
    if (v_is_final) obj->is_final = yyjson_get_int(v_is_final);
    yyjson_val *v_is_inner = yyjson_obj_get(root, "is_inner");
    if (v_is_inner) obj->is_inner = yyjson_get_int(v_is_inner);
    yyjson_val *v_is_outer = yyjson_obj_get(root, "is_outer");
    if (v_is_outer) obj->is_outer = yyjson_get_int(v_is_outer);
    yyjson_val *v_modifier_count = yyjson_obj_get(root, "modifier_count");
    if (v_modifier_count) obj->modifier_count = yyjson_get_int(v_modifier_count);

    yyjson_doc_free(doc);
    return 0;
}

int MoConnection_to_json(const MoConnection *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "from_component", obj->from_component);
    yyjson_mut_obj_add_str(doc, root, "from_connector", obj->from_connector);
    yyjson_mut_obj_add_str(doc, root, "to_component", obj->to_component);
    yyjson_mut_obj_add_str(doc, root, "to_connector", obj->to_connector);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoConnection_from_json(const char *json, MoConnection *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_from_component = yyjson_obj_get(root, "from_component");
    if (v_from_component) strncpy(obj->from_component, yyjson_get_str(v_from_component), sizeof(obj->from_component)-1);
    yyjson_val *v_from_connector = yyjson_obj_get(root, "from_connector");
    if (v_from_connector) strncpy(obj->from_connector, yyjson_get_str(v_from_connector), sizeof(obj->from_connector)-1);
    yyjson_val *v_to_component = yyjson_obj_get(root, "to_component");
    if (v_to_component) strncpy(obj->to_component, yyjson_get_str(v_to_component), sizeof(obj->to_component)-1);
    yyjson_val *v_to_connector = yyjson_obj_get(root, "to_connector");
    if (v_to_connector) strncpy(obj->to_connector, yyjson_get_str(v_to_connector), sizeof(obj->to_connector)-1);

    yyjson_doc_free(doc);
    return 0;
}

int MoClass_to_json(const MoClass *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_uint(doc, root, "class_type", obj->class_type);
    yyjson_mut_obj_add_int(doc, root, "is_partial", obj->is_partial);
    yyjson_mut_obj_add_int(doc, root, "is_encapsulated", obj->is_encapsulated);
    yyjson_mut_obj_add_int(doc, root, "extends_count", obj->extends_count);
    yyjson_mut_obj_add_int(doc, root, "variable_count", obj->variable_count);
    yyjson_mut_obj_add_int(doc, root, "equation_count", obj->equation_count);
    yyjson_mut_obj_add_int(doc, root, "component_count", obj->component_count);
    yyjson_mut_obj_add_int(doc, root, "connection_count", obj->connection_count);
    yyjson_mut_obj_add_str(doc, root, "description", obj->description);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoClass_from_json(const char *json, MoClass *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_class_type = yyjson_obj_get(root, "class_type");
    if (v_class_type) obj->class_type = yyjson_get_uint(v_class_type);
    yyjson_val *v_is_partial = yyjson_obj_get(root, "is_partial");
    if (v_is_partial) obj->is_partial = yyjson_get_int(v_is_partial);
    yyjson_val *v_is_encapsulated = yyjson_obj_get(root, "is_encapsulated");
    if (v_is_encapsulated) obj->is_encapsulated = yyjson_get_int(v_is_encapsulated);
    yyjson_val *v_extends_count = yyjson_obj_get(root, "extends_count");
    if (v_extends_count) obj->extends_count = yyjson_get_int(v_extends_count);
    yyjson_val *v_variable_count = yyjson_obj_get(root, "variable_count");
    if (v_variable_count) obj->variable_count = yyjson_get_int(v_variable_count);
    yyjson_val *v_equation_count = yyjson_obj_get(root, "equation_count");
    if (v_equation_count) obj->equation_count = yyjson_get_int(v_equation_count);
    yyjson_val *v_component_count = yyjson_obj_get(root, "component_count");
    if (v_component_count) obj->component_count = yyjson_get_int(v_component_count);
    yyjson_val *v_connection_count = yyjson_obj_get(root, "connection_count");
    if (v_connection_count) obj->connection_count = yyjson_get_int(v_connection_count);
    yyjson_val *v_description = yyjson_obj_get(root, "description");
    if (v_description) strncpy(obj->description, yyjson_get_str(v_description), sizeof(obj->description)-1);

    yyjson_doc_free(doc);
    return 0;
}

int MoPackage_to_json(const MoPackage *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "version", obj->version);
    yyjson_mut_obj_add_int(doc, root, "class_count", obj->class_count);
    yyjson_mut_obj_add_int(doc, root, "uses_count", obj->uses_count);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoPackage_from_json(const char *json, MoPackage *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_version = yyjson_obj_get(root, "version");
    if (v_version) strncpy(obj->version, yyjson_get_str(v_version), sizeof(obj->version)-1);
    yyjson_val *v_class_count = yyjson_obj_get(root, "class_count");
    if (v_class_count) obj->class_count = yyjson_get_int(v_class_count);
    yyjson_val *v_uses_count = yyjson_obj_get(root, "uses_count");
    if (v_uses_count) obj->uses_count = yyjson_get_int(v_uses_count);

    yyjson_doc_free(doc);
    return 0;
}

int MoSimulationConfig_to_json(const MoSimulationConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_real(doc, root, "start_time", obj->start_time);
    yyjson_mut_obj_add_real(doc, root, "stop_time", obj->stop_time);
    yyjson_mut_obj_add_real(doc, root, "step_size", obj->step_size);
    yyjson_mut_obj_add_real(doc, root, "tolerance", obj->tolerance);
    yyjson_mut_obj_add_str(doc, root, "solver", obj->solver);
    yyjson_mut_obj_add_str(doc, root, "output_format", obj->output_format);
    yyjson_mut_obj_add_int(doc, root, "number_of_intervals", obj->number_of_intervals);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoSimulationConfig_from_json(const char *json, MoSimulationConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_start_time = yyjson_obj_get(root, "start_time");
    if (v_start_time) obj->start_time = yyjson_get_real(v_start_time);
    yyjson_val *v_stop_time = yyjson_obj_get(root, "stop_time");
    if (v_stop_time) obj->stop_time = yyjson_get_real(v_stop_time);
    yyjson_val *v_step_size = yyjson_obj_get(root, "step_size");
    if (v_step_size) obj->step_size = yyjson_get_real(v_step_size);
    yyjson_val *v_tolerance = yyjson_obj_get(root, "tolerance");
    if (v_tolerance) obj->tolerance = yyjson_get_real(v_tolerance);
    yyjson_val *v_solver = yyjson_obj_get(root, "solver");
    if (v_solver) strncpy(obj->solver, yyjson_get_str(v_solver), sizeof(obj->solver)-1);
    yyjson_val *v_output_format = yyjson_obj_get(root, "output_format");
    if (v_output_format) strncpy(obj->output_format, yyjson_get_str(v_output_format), sizeof(obj->output_format)-1);
    yyjson_val *v_number_of_intervals = yyjson_obj_get(root, "number_of_intervals");
    if (v_number_of_intervals) obj->number_of_intervals = yyjson_get_int(v_number_of_intervals);

    yyjson_doc_free(doc);
    return 0;
}

int OmcCompilerConfig_to_json(const OmcCompilerConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "input_path", obj->input_path);
    yyjson_mut_obj_add_str(doc, root, "output_dir", obj->output_dir);
    yyjson_mut_obj_add_str(doc, root, "target", obj->target);
    yyjson_mut_obj_add_int(doc, root, "generate_code", obj->generate_code);
    yyjson_mut_obj_add_int(doc, root, "generate_makefile", obj->generate_makefile);
    yyjson_mut_obj_add_int(doc, root, "debug_info", obj->debug_info);
    yyjson_mut_obj_add_int(doc, root, "optimize", obj->optimize);
    yyjson_mut_obj_add_int(doc, root, "profiling", obj->profiling);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int OmcCompilerConfig_from_json(const char *json, OmcCompilerConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_input_path = yyjson_obj_get(root, "input_path");
    if (v_input_path) strncpy(obj->input_path, yyjson_get_str(v_input_path), sizeof(obj->input_path)-1);
    yyjson_val *v_output_dir = yyjson_obj_get(root, "output_dir");
    if (v_output_dir) strncpy(obj->output_dir, yyjson_get_str(v_output_dir), sizeof(obj->output_dir)-1);
    yyjson_val *v_target = yyjson_obj_get(root, "target");
    if (v_target) strncpy(obj->target, yyjson_get_str(v_target), sizeof(obj->target)-1);
    yyjson_val *v_generate_code = yyjson_obj_get(root, "generate_code");
    if (v_generate_code) obj->generate_code = yyjson_get_int(v_generate_code);
    yyjson_val *v_generate_makefile = yyjson_obj_get(root, "generate_makefile");
    if (v_generate_makefile) obj->generate_makefile = yyjson_get_int(v_generate_makefile);
    yyjson_val *v_debug_info = yyjson_obj_get(root, "debug_info");
    if (v_debug_info) obj->debug_info = yyjson_get_int(v_debug_info);
    yyjson_val *v_optimize = yyjson_obj_get(root, "optimize");
    if (v_optimize) obj->optimize = yyjson_get_int(v_optimize);
    yyjson_val *v_profiling = yyjson_obj_get(root, "profiling");
    if (v_profiling) obj->profiling = yyjson_get_int(v_profiling);

    yyjson_doc_free(doc);
    return 0;
}

int MoFmuConfig_to_json(const MoFmuConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "fmu_name", obj->fmu_name);
    yyjson_mut_obj_add_uint(doc, root, "fmu_type", obj->fmu_type);
    yyjson_mut_obj_add_str(doc, root, "fmu_version", obj->fmu_version);
    yyjson_mut_obj_add_int(doc, root, "include_source", obj->include_source);
    yyjson_mut_obj_add_str(doc, root, "platforms", obj->platforms);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int MoFmuConfig_from_json(const char *json, MoFmuConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_fmu_name = yyjson_obj_get(root, "fmu_name");
    if (v_fmu_name) strncpy(obj->fmu_name, yyjson_get_str(v_fmu_name), sizeof(obj->fmu_name)-1);
    yyjson_val *v_fmu_type = yyjson_obj_get(root, "fmu_type");
    if (v_fmu_type) obj->fmu_type = yyjson_get_uint(v_fmu_type);
    yyjson_val *v_fmu_version = yyjson_obj_get(root, "fmu_version");
    if (v_fmu_version) strncpy(obj->fmu_version, yyjson_get_str(v_fmu_version), sizeof(obj->fmu_version)-1);
    yyjson_val *v_include_source = yyjson_obj_get(root, "include_source");
    if (v_include_source) obj->include_source = yyjson_get_int(v_include_source);
    yyjson_val *v_platforms = yyjson_obj_get(root, "platforms");
    if (v_platforms) strncpy(obj->platforms, yyjson_get_str(v_platforms), sizeof(obj->platforms)-1);

    yyjson_doc_free(doc);
    return 0;
}

