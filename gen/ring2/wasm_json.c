/* AUTO-GENERATED by schemagen 2.0.0 â€” DO NOT EDIT */
/* JSON serialization (requires yyjson) */

#include "wasm_json.h"
#include <yyjson.h>
#include <string.h>

int WasmOptPass_to_json(const WasmOptPass *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_int(doc, root, "enabled", obj->enabled);
    yyjson_mut_obj_add_str(doc, root, "options", obj->options);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WasmOptPass_from_json(const char *json, WasmOptPass *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_enabled = yyjson_obj_get(root, "enabled");
    if (v_enabled) obj->enabled = yyjson_get_int(v_enabled);
    yyjson_val *v_options = yyjson_obj_get(root, "options");
    if (v_options) strncpy(obj->options, yyjson_get_str(v_options), sizeof(obj->options)-1);

    yyjson_doc_free(doc);
    return 0;
}

int BinaryenConfig_to_json(const BinaryenConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "input_path", obj->input_path);
    yyjson_mut_obj_add_str(doc, root, "output_path", obj->output_path);
    yyjson_mut_obj_add_int(doc, root, "optimize_level", obj->optimize_level);
    yyjson_mut_obj_add_int(doc, root, "shrink_level", obj->shrink_level);
    yyjson_mut_obj_add_int(doc, root, "enable_simd", obj->enable_simd);
    yyjson_mut_obj_add_int(doc, root, "enable_threads", obj->enable_threads);
    yyjson_mut_obj_add_int(doc, root, "enable_bulk_memory", obj->enable_bulk_memory);
    yyjson_mut_obj_add_int(doc, root, "enable_reference_types", obj->enable_reference_types);
    yyjson_mut_obj_add_int(doc, root, "enable_gc", obj->enable_gc);
    yyjson_mut_obj_add_int(doc, root, "enable_exception_handling", obj->enable_exception_handling);
    yyjson_mut_obj_add_int(doc, root, "enable_tail_call", obj->enable_tail_call);
    yyjson_mut_obj_add_int(doc, root, "low_memory_unused", obj->low_memory_unused);
    yyjson_mut_obj_add_int(doc, root, "zero_filled_memory", obj->zero_filled_memory);
    yyjson_mut_obj_add_int(doc, root, "fast_math", obj->fast_math);
    yyjson_mut_obj_add_int(doc, root, "debug_info", obj->debug_info);
    yyjson_mut_obj_add_int(doc, root, "source_map", obj->source_map);
    yyjson_mut_obj_add_str(doc, root, "source_map_url", obj->source_map_url);
    yyjson_mut_obj_add_int(doc, root, "emit_text", obj->emit_text);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int BinaryenConfig_from_json(const char *json, BinaryenConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_input_path = yyjson_obj_get(root, "input_path");
    if (v_input_path) strncpy(obj->input_path, yyjson_get_str(v_input_path), sizeof(obj->input_path)-1);
    yyjson_val *v_output_path = yyjson_obj_get(root, "output_path");
    if (v_output_path) strncpy(obj->output_path, yyjson_get_str(v_output_path), sizeof(obj->output_path)-1);
    yyjson_val *v_optimize_level = yyjson_obj_get(root, "optimize_level");
    if (v_optimize_level) obj->optimize_level = yyjson_get_int(v_optimize_level);
    yyjson_val *v_shrink_level = yyjson_obj_get(root, "shrink_level");
    if (v_shrink_level) obj->shrink_level = yyjson_get_int(v_shrink_level);
    yyjson_val *v_enable_simd = yyjson_obj_get(root, "enable_simd");
    if (v_enable_simd) obj->enable_simd = yyjson_get_int(v_enable_simd);
    yyjson_val *v_enable_threads = yyjson_obj_get(root, "enable_threads");
    if (v_enable_threads) obj->enable_threads = yyjson_get_int(v_enable_threads);
    yyjson_val *v_enable_bulk_memory = yyjson_obj_get(root, "enable_bulk_memory");
    if (v_enable_bulk_memory) obj->enable_bulk_memory = yyjson_get_int(v_enable_bulk_memory);
    yyjson_val *v_enable_reference_types = yyjson_obj_get(root, "enable_reference_types");
    if (v_enable_reference_types) obj->enable_reference_types = yyjson_get_int(v_enable_reference_types);
    yyjson_val *v_enable_gc = yyjson_obj_get(root, "enable_gc");
    if (v_enable_gc) obj->enable_gc = yyjson_get_int(v_enable_gc);
    yyjson_val *v_enable_exception_handling = yyjson_obj_get(root, "enable_exception_handling");
    if (v_enable_exception_handling) obj->enable_exception_handling = yyjson_get_int(v_enable_exception_handling);
    yyjson_val *v_enable_tail_call = yyjson_obj_get(root, "enable_tail_call");
    if (v_enable_tail_call) obj->enable_tail_call = yyjson_get_int(v_enable_tail_call);
    yyjson_val *v_low_memory_unused = yyjson_obj_get(root, "low_memory_unused");
    if (v_low_memory_unused) obj->low_memory_unused = yyjson_get_int(v_low_memory_unused);
    yyjson_val *v_zero_filled_memory = yyjson_obj_get(root, "zero_filled_memory");
    if (v_zero_filled_memory) obj->zero_filled_memory = yyjson_get_int(v_zero_filled_memory);
    yyjson_val *v_fast_math = yyjson_obj_get(root, "fast_math");
    if (v_fast_math) obj->fast_math = yyjson_get_int(v_fast_math);
    yyjson_val *v_debug_info = yyjson_obj_get(root, "debug_info");
    if (v_debug_info) obj->debug_info = yyjson_get_int(v_debug_info);
    yyjson_val *v_source_map = yyjson_obj_get(root, "source_map");
    if (v_source_map) obj->source_map = yyjson_get_int(v_source_map);
    yyjson_val *v_source_map_url = yyjson_obj_get(root, "source_map_url");
    if (v_source_map_url) strncpy(obj->source_map_url, yyjson_get_str(v_source_map_url), sizeof(obj->source_map_url)-1);
    yyjson_val *v_emit_text = yyjson_obj_get(root, "emit_text");
    if (v_emit_text) obj->emit_text = yyjson_get_int(v_emit_text);

    yyjson_doc_free(doc);
    return 0;
}

int WasmOptConfig_to_json(const WasmOptConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_int(doc, root, "dce", obj->dce);
    yyjson_mut_obj_add_int(doc, root, "duplicate_function_elimination", obj->duplicate_function_elimination);
    yyjson_mut_obj_add_int(doc, root, "inlining", obj->inlining);
    yyjson_mut_obj_add_int(doc, root, "local_cse", obj->local_cse);
    yyjson_mut_obj_add_int(doc, root, "memory_packing", obj->memory_packing);
    yyjson_mut_obj_add_int(doc, root, "optimize_instructions", obj->optimize_instructions);
    yyjson_mut_obj_add_int(doc, root, "precompute", obj->precompute);
    yyjson_mut_obj_add_int(doc, root, "remove_unused_names", obj->remove_unused_names);
    yyjson_mut_obj_add_int(doc, root, "reorder_functions", obj->reorder_functions);
    yyjson_mut_obj_add_int(doc, root, "simplify_globals", obj->simplify_globals);
    yyjson_mut_obj_add_int(doc, root, "simplify_locals", obj->simplify_locals);
    yyjson_mut_obj_add_int(doc, root, "vacuum", obj->vacuum);
    yyjson_mut_obj_add_int(doc, root, "asyncify", obj->asyncify);
    yyjson_mut_obj_add_int(doc, root, "flatten", obj->flatten);
    yyjson_mut_obj_add_int(doc, root, "legalize_js_interface", obj->legalize_js_interface);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WasmOptConfig_from_json(const char *json, WasmOptConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_dce = yyjson_obj_get(root, "dce");
    if (v_dce) obj->dce = yyjson_get_int(v_dce);
    yyjson_val *v_duplicate_function_elimination = yyjson_obj_get(root, "duplicate_function_elimination");
    if (v_duplicate_function_elimination) obj->duplicate_function_elimination = yyjson_get_int(v_duplicate_function_elimination);
    yyjson_val *v_inlining = yyjson_obj_get(root, "inlining");
    if (v_inlining) obj->inlining = yyjson_get_int(v_inlining);
    yyjson_val *v_local_cse = yyjson_obj_get(root, "local_cse");
    if (v_local_cse) obj->local_cse = yyjson_get_int(v_local_cse);
    yyjson_val *v_memory_packing = yyjson_obj_get(root, "memory_packing");
    if (v_memory_packing) obj->memory_packing = yyjson_get_int(v_memory_packing);
    yyjson_val *v_optimize_instructions = yyjson_obj_get(root, "optimize_instructions");
    if (v_optimize_instructions) obj->optimize_instructions = yyjson_get_int(v_optimize_instructions);
    yyjson_val *v_precompute = yyjson_obj_get(root, "precompute");
    if (v_precompute) obj->precompute = yyjson_get_int(v_precompute);
    yyjson_val *v_remove_unused_names = yyjson_obj_get(root, "remove_unused_names");
    if (v_remove_unused_names) obj->remove_unused_names = yyjson_get_int(v_remove_unused_names);
    yyjson_val *v_reorder_functions = yyjson_obj_get(root, "reorder_functions");
    if (v_reorder_functions) obj->reorder_functions = yyjson_get_int(v_reorder_functions);
    yyjson_val *v_simplify_globals = yyjson_obj_get(root, "simplify_globals");
    if (v_simplify_globals) obj->simplify_globals = yyjson_get_int(v_simplify_globals);
    yyjson_val *v_simplify_locals = yyjson_obj_get(root, "simplify_locals");
    if (v_simplify_locals) obj->simplify_locals = yyjson_get_int(v_simplify_locals);
    yyjson_val *v_vacuum = yyjson_obj_get(root, "vacuum");
    if (v_vacuum) obj->vacuum = yyjson_get_int(v_vacuum);
    yyjson_val *v_asyncify = yyjson_obj_get(root, "asyncify");
    if (v_asyncify) obj->asyncify = yyjson_get_int(v_asyncify);
    yyjson_val *v_flatten = yyjson_obj_get(root, "flatten");
    if (v_flatten) obj->flatten = yyjson_get_int(v_flatten);
    yyjson_val *v_legalize_js_interface = yyjson_obj_get(root, "legalize_js_interface");
    if (v_legalize_js_interface) obj->legalize_js_interface = yyjson_get_int(v_legalize_js_interface);

    yyjson_doc_free(doc);
    return 0;
}

int WamrModule_to_json(const WamrModule *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "wasm_data", obj->wasm_data);
    yyjson_mut_obj_add_int(doc, root, "wasm_size", obj->wasm_size);
    yyjson_mut_obj_add_int(doc, root, "heap_size", obj->heap_size);
    yyjson_mut_obj_add_int(doc, root, "stack_size", obj->stack_size);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WamrModule_from_json(const char *json, WamrModule *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_wasm_data = yyjson_obj_get(root, "wasm_data");
    if (v_wasm_data) strncpy(obj->wasm_data, yyjson_get_str(v_wasm_data), sizeof(obj->wasm_data)-1);
    yyjson_val *v_wasm_size = yyjson_obj_get(root, "wasm_size");
    if (v_wasm_size) obj->wasm_size = yyjson_get_int(v_wasm_size);
    yyjson_val *v_heap_size = yyjson_obj_get(root, "heap_size");
    if (v_heap_size) obj->heap_size = yyjson_get_int(v_heap_size);
    yyjson_val *v_stack_size = yyjson_obj_get(root, "stack_size");
    if (v_stack_size) obj->stack_size = yyjson_get_int(v_stack_size);

    yyjson_doc_free(doc);
    return 0;
}

int WamrImport_to_json(const WamrImport *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "module_name", obj->module_name);
    yyjson_mut_obj_add_str(doc, root, "func_name", obj->func_name);
    yyjson_mut_obj_add_str(doc, root, "signature", obj->signature);
    yyjson_mut_obj_add_str(doc, root, "native_func", obj->native_func);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WamrImport_from_json(const char *json, WamrImport *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_module_name = yyjson_obj_get(root, "module_name");
    if (v_module_name) strncpy(obj->module_name, yyjson_get_str(v_module_name), sizeof(obj->module_name)-1);
    yyjson_val *v_func_name = yyjson_obj_get(root, "func_name");
    if (v_func_name) strncpy(obj->func_name, yyjson_get_str(v_func_name), sizeof(obj->func_name)-1);
    yyjson_val *v_signature = yyjson_obj_get(root, "signature");
    if (v_signature) strncpy(obj->signature, yyjson_get_str(v_signature), sizeof(obj->signature)-1);
    yyjson_val *v_native_func = yyjson_obj_get(root, "native_func");
    if (v_native_func) strncpy(obj->native_func, yyjson_get_str(v_native_func), sizeof(obj->native_func)-1);

    yyjson_doc_free(doc);
    return 0;
}

int WamrExport_to_json(const WamrExport *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "name", obj->name);
    yyjson_mut_obj_add_str(doc, root, "signature", obj->signature);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WamrExport_from_json(const char *json, WamrExport *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_name = yyjson_obj_get(root, "name");
    if (v_name) strncpy(obj->name, yyjson_get_str(v_name), sizeof(obj->name)-1);
    yyjson_val *v_signature = yyjson_obj_get(root, "signature");
    if (v_signature) strncpy(obj->signature, yyjson_get_str(v_signature), sizeof(obj->signature)-1);

    yyjson_doc_free(doc);
    return 0;
}

int WamrRuntimeConfig_to_json(const WamrRuntimeConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_uint(doc, root, "exec_mode", obj->exec_mode);
    yyjson_mut_obj_add_uint(doc, root, "interp_mode", obj->interp_mode);
    yyjson_mut_obj_add_int(doc, root, "global_heap_size", obj->global_heap_size);
    yyjson_mut_obj_add_int(doc, root, "max_thread_num", obj->max_thread_num);
    yyjson_mut_obj_add_int(doc, root, "enable_bulk_memory", obj->enable_bulk_memory);
    yyjson_mut_obj_add_int(doc, root, "enable_thread_mgr", obj->enable_thread_mgr);
    yyjson_mut_obj_add_int(doc, root, "enable_ref_types", obj->enable_ref_types);
    yyjson_mut_obj_add_int(doc, root, "enable_simd", obj->enable_simd);
    yyjson_mut_obj_add_int(doc, root, "enable_tail_call", obj->enable_tail_call);
    yyjson_mut_obj_add_int(doc, root, "enable_memory64", obj->enable_memory64);
    yyjson_mut_obj_add_int(doc, root, "enable_multi_memory", obj->enable_multi_memory);
    yyjson_mut_obj_add_int(doc, root, "enable_wasi", obj->enable_wasi);
    yyjson_mut_obj_add_str(doc, root, "wasi_dirs", obj->wasi_dirs);
    yyjson_mut_obj_add_int(doc, root, "enable_debug", obj->enable_debug);
    yyjson_mut_obj_add_int(doc, root, "debug_port", obj->debug_port);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WamrRuntimeConfig_from_json(const char *json, WamrRuntimeConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_exec_mode = yyjson_obj_get(root, "exec_mode");
    if (v_exec_mode) obj->exec_mode = yyjson_get_uint(v_exec_mode);
    yyjson_val *v_interp_mode = yyjson_obj_get(root, "interp_mode");
    if (v_interp_mode) obj->interp_mode = yyjson_get_uint(v_interp_mode);
    yyjson_val *v_global_heap_size = yyjson_obj_get(root, "global_heap_size");
    if (v_global_heap_size) obj->global_heap_size = yyjson_get_int(v_global_heap_size);
    yyjson_val *v_max_thread_num = yyjson_obj_get(root, "max_thread_num");
    if (v_max_thread_num) obj->max_thread_num = yyjson_get_int(v_max_thread_num);
    yyjson_val *v_enable_bulk_memory = yyjson_obj_get(root, "enable_bulk_memory");
    if (v_enable_bulk_memory) obj->enable_bulk_memory = yyjson_get_int(v_enable_bulk_memory);
    yyjson_val *v_enable_thread_mgr = yyjson_obj_get(root, "enable_thread_mgr");
    if (v_enable_thread_mgr) obj->enable_thread_mgr = yyjson_get_int(v_enable_thread_mgr);
    yyjson_val *v_enable_ref_types = yyjson_obj_get(root, "enable_ref_types");
    if (v_enable_ref_types) obj->enable_ref_types = yyjson_get_int(v_enable_ref_types);
    yyjson_val *v_enable_simd = yyjson_obj_get(root, "enable_simd");
    if (v_enable_simd) obj->enable_simd = yyjson_get_int(v_enable_simd);
    yyjson_val *v_enable_tail_call = yyjson_obj_get(root, "enable_tail_call");
    if (v_enable_tail_call) obj->enable_tail_call = yyjson_get_int(v_enable_tail_call);
    yyjson_val *v_enable_memory64 = yyjson_obj_get(root, "enable_memory64");
    if (v_enable_memory64) obj->enable_memory64 = yyjson_get_int(v_enable_memory64);
    yyjson_val *v_enable_multi_memory = yyjson_obj_get(root, "enable_multi_memory");
    if (v_enable_multi_memory) obj->enable_multi_memory = yyjson_get_int(v_enable_multi_memory);
    yyjson_val *v_enable_wasi = yyjson_obj_get(root, "enable_wasi");
    if (v_enable_wasi) obj->enable_wasi = yyjson_get_int(v_enable_wasi);
    yyjson_val *v_wasi_dirs = yyjson_obj_get(root, "wasi_dirs");
    if (v_wasi_dirs) strncpy(obj->wasi_dirs, yyjson_get_str(v_wasi_dirs), sizeof(obj->wasi_dirs)-1);
    yyjson_val *v_enable_debug = yyjson_obj_get(root, "enable_debug");
    if (v_enable_debug) obj->enable_debug = yyjson_get_int(v_enable_debug);
    yyjson_val *v_debug_port = yyjson_obj_get(root, "debug_port");
    if (v_debug_port) obj->debug_port = yyjson_get_int(v_debug_port);

    yyjson_doc_free(doc);
    return 0;
}

int WamrAotConfig_to_json(const WamrAotConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "input_wasm", obj->input_wasm);
    yyjson_mut_obj_add_str(doc, root, "output_aot", obj->output_aot);
    yyjson_mut_obj_add_str(doc, root, "target_arch", obj->target_arch);
    yyjson_mut_obj_add_str(doc, root, "target_abi", obj->target_abi);
    yyjson_mut_obj_add_str(doc, root, "cpu", obj->cpu);
    yyjson_mut_obj_add_int(doc, root, "opt_level", obj->opt_level);
    yyjson_mut_obj_add_int(doc, root, "size_level", obj->size_level);
    yyjson_mut_obj_add_int(doc, root, "enable_simd", obj->enable_simd);
    yyjson_mut_obj_add_int(doc, root, "enable_bulk_memory", obj->enable_bulk_memory);
    yyjson_mut_obj_add_int(doc, root, "enable_ref_types", obj->enable_ref_types);
    yyjson_mut_obj_add_int(doc, root, "bounds_checks", obj->bounds_checks);
    yyjson_mut_obj_add_int(doc, root, "stack_bounds_checks", obj->stack_bounds_checks);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WamrAotConfig_from_json(const char *json, WamrAotConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_input_wasm = yyjson_obj_get(root, "input_wasm");
    if (v_input_wasm) strncpy(obj->input_wasm, yyjson_get_str(v_input_wasm), sizeof(obj->input_wasm)-1);
    yyjson_val *v_output_aot = yyjson_obj_get(root, "output_aot");
    if (v_output_aot) strncpy(obj->output_aot, yyjson_get_str(v_output_aot), sizeof(obj->output_aot)-1);
    yyjson_val *v_target_arch = yyjson_obj_get(root, "target_arch");
    if (v_target_arch) strncpy(obj->target_arch, yyjson_get_str(v_target_arch), sizeof(obj->target_arch)-1);
    yyjson_val *v_target_abi = yyjson_obj_get(root, "target_abi");
    if (v_target_abi) strncpy(obj->target_abi, yyjson_get_str(v_target_abi), sizeof(obj->target_abi)-1);
    yyjson_val *v_cpu = yyjson_obj_get(root, "cpu");
    if (v_cpu) strncpy(obj->cpu, yyjson_get_str(v_cpu), sizeof(obj->cpu)-1);
    yyjson_val *v_opt_level = yyjson_obj_get(root, "opt_level");
    if (v_opt_level) obj->opt_level = yyjson_get_int(v_opt_level);
    yyjson_val *v_size_level = yyjson_obj_get(root, "size_level");
    if (v_size_level) obj->size_level = yyjson_get_int(v_size_level);
    yyjson_val *v_enable_simd = yyjson_obj_get(root, "enable_simd");
    if (v_enable_simd) obj->enable_simd = yyjson_get_int(v_enable_simd);
    yyjson_val *v_enable_bulk_memory = yyjson_obj_get(root, "enable_bulk_memory");
    if (v_enable_bulk_memory) obj->enable_bulk_memory = yyjson_get_int(v_enable_bulk_memory);
    yyjson_val *v_enable_ref_types = yyjson_obj_get(root, "enable_ref_types");
    if (v_enable_ref_types) obj->enable_ref_types = yyjson_get_int(v_enable_ref_types);
    yyjson_val *v_bounds_checks = yyjson_obj_get(root, "bounds_checks");
    if (v_bounds_checks) obj->bounds_checks = yyjson_get_int(v_bounds_checks);
    yyjson_val *v_stack_bounds_checks = yyjson_obj_get(root, "stack_bounds_checks");
    if (v_stack_bounds_checks) obj->stack_bounds_checks = yyjson_get_int(v_stack_bounds_checks);

    yyjson_doc_free(doc);
    return 0;
}

int WasmEmbedding_to_json(const WasmEmbedding *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "module_name", obj->module_name);
    yyjson_mut_obj_add_str(doc, root, "wasm_file", obj->wasm_file);
    yyjson_mut_obj_add_str(doc, root, "c_symbol", obj->c_symbol);
    yyjson_mut_obj_add_int(doc, root, "compress", obj->compress);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WasmEmbedding_from_json(const char *json, WasmEmbedding *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_module_name = yyjson_obj_get(root, "module_name");
    if (v_module_name) strncpy(obj->module_name, yyjson_get_str(v_module_name), sizeof(obj->module_name)-1);
    yyjson_val *v_wasm_file = yyjson_obj_get(root, "wasm_file");
    if (v_wasm_file) strncpy(obj->wasm_file, yyjson_get_str(v_wasm_file), sizeof(obj->wasm_file)-1);
    yyjson_val *v_c_symbol = yyjson_obj_get(root, "c_symbol");
    if (v_c_symbol) strncpy(obj->c_symbol, yyjson_get_str(v_c_symbol), sizeof(obj->c_symbol)-1);
    yyjson_val *v_compress = yyjson_obj_get(root, "compress");
    if (v_compress) obj->compress = yyjson_get_int(v_compress);

    yyjson_doc_free(doc);
    return 0;
}

int WasmBuildConfig_to_json(const WasmBuildConfig *obj, char *buf, size_t size) {
    yyjson_mut_doc *doc = yyjson_mut_doc_new(NULL);
    yyjson_mut_val *root = yyjson_mut_obj(doc);
    yyjson_mut_doc_set_root(doc, root);

    yyjson_mut_obj_add_str(doc, root, "source_files", obj->source_files);
    yyjson_mut_obj_add_str(doc, root, "include_dirs", obj->include_dirs);
    yyjson_mut_obj_add_str(doc, root, "defines", obj->defines);
    yyjson_mut_obj_add_str(doc, root, "clang_target", obj->clang_target);
    yyjson_mut_obj_add_str(doc, root, "optimization", obj->optimization);
    yyjson_mut_obj_add_int(doc, root, "link_wasi", obj->link_wasi);
    yyjson_mut_obj_add_int(doc, root, "export_all", obj->export_all);
    yyjson_mut_obj_add_int(doc, root, "stack_size", obj->stack_size);
    yyjson_mut_obj_add_int(doc, root, "initial_memory", obj->initial_memory);
    yyjson_mut_obj_add_int(doc, root, "max_memory", obj->max_memory);
    yyjson_mut_obj_add_int(doc, root, "run_wasm_opt", obj->run_wasm_opt);
    yyjson_mut_obj_add_int(doc, root, "wasm_opt_level", obj->wasm_opt_level);
    yyjson_mut_obj_add_str(doc, root, "output_wasm", obj->output_wasm);
    yyjson_mut_obj_add_int(doc, root, "output_wat", obj->output_wat);
    yyjson_mut_obj_add_int(doc, root, "embed_in_c", obj->embed_in_c);

    size_t len = 0;
    char *json_str = yyjson_mut_write(doc, 0, &len);
    yyjson_mut_doc_free(doc);
    if (!json_str) return -1;
    if (len >= size) { free(json_str); return -1; }
    memcpy(buf, json_str, len + 1);
    free(json_str);
    return (int)len;
}

int WasmBuildConfig_from_json(const char *json, WasmBuildConfig *obj) {
    yyjson_doc *doc = yyjson_read(json, strlen(json), 0);
    if (!doc) return -1;
    yyjson_val *root = yyjson_doc_get_root(doc);

    yyjson_val *v_source_files = yyjson_obj_get(root, "source_files");
    if (v_source_files) strncpy(obj->source_files, yyjson_get_str(v_source_files), sizeof(obj->source_files)-1);
    yyjson_val *v_include_dirs = yyjson_obj_get(root, "include_dirs");
    if (v_include_dirs) strncpy(obj->include_dirs, yyjson_get_str(v_include_dirs), sizeof(obj->include_dirs)-1);
    yyjson_val *v_defines = yyjson_obj_get(root, "defines");
    if (v_defines) strncpy(obj->defines, yyjson_get_str(v_defines), sizeof(obj->defines)-1);
    yyjson_val *v_clang_target = yyjson_obj_get(root, "clang_target");
    if (v_clang_target) strncpy(obj->clang_target, yyjson_get_str(v_clang_target), sizeof(obj->clang_target)-1);
    yyjson_val *v_optimization = yyjson_obj_get(root, "optimization");
    if (v_optimization) strncpy(obj->optimization, yyjson_get_str(v_optimization), sizeof(obj->optimization)-1);
    yyjson_val *v_link_wasi = yyjson_obj_get(root, "link_wasi");
    if (v_link_wasi) obj->link_wasi = yyjson_get_int(v_link_wasi);
    yyjson_val *v_export_all = yyjson_obj_get(root, "export_all");
    if (v_export_all) obj->export_all = yyjson_get_int(v_export_all);
    yyjson_val *v_stack_size = yyjson_obj_get(root, "stack_size");
    if (v_stack_size) obj->stack_size = yyjson_get_int(v_stack_size);
    yyjson_val *v_initial_memory = yyjson_obj_get(root, "initial_memory");
    if (v_initial_memory) obj->initial_memory = yyjson_get_int(v_initial_memory);
    yyjson_val *v_max_memory = yyjson_obj_get(root, "max_memory");
    if (v_max_memory) obj->max_memory = yyjson_get_int(v_max_memory);
    yyjson_val *v_run_wasm_opt = yyjson_obj_get(root, "run_wasm_opt");
    if (v_run_wasm_opt) obj->run_wasm_opt = yyjson_get_int(v_run_wasm_opt);
    yyjson_val *v_wasm_opt_level = yyjson_obj_get(root, "wasm_opt_level");
    if (v_wasm_opt_level) obj->wasm_opt_level = yyjson_get_int(v_wasm_opt_level);
    yyjson_val *v_output_wasm = yyjson_obj_get(root, "output_wasm");
    if (v_output_wasm) strncpy(obj->output_wasm, yyjson_get_str(v_output_wasm), sizeof(obj->output_wasm)-1);
    yyjson_val *v_output_wat = yyjson_obj_get(root, "output_wat");
    if (v_output_wat) obj->output_wat = yyjson_get_int(v_output_wat);
    yyjson_val *v_embed_in_c = yyjson_obj_get(root, "embed_in_c");
    if (v_embed_in_c) obj->embed_in_c = yyjson_get_int(v_embed_in_c);

    yyjson_doc_free(doc);
    return 0;
}

